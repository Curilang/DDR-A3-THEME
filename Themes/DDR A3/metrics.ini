# 01 #
[Global]
FallbackTheme=_fallback

[Common]
InitialScreen="ScreenClear"
FirstAttractScreen="ScreenWarning"
DefaultNoteSkinName="default"

ScreenWidth=1
ScreenHeight=480
AutoSetStyle=false

[ScreenAttract]
Class="ScreenAttract"
Fallback="ScreenWithMenuElementsBlank"
StartScreen=Branch.TitleMenu()
CancelScreen=Branch.TitleMenu()
#
LightsMode="LightsMode_Attract"
PlayMusic=false
#
ResetGameState=true
BackGoesToStartScreen=true
AttractVolume=true
#
TimerMetricsGroup="MenuTimerNoSound"
TimerStealth=true
ForceTimer=true
TimerOnCommand=visible,false

[ScreenClear]
Class="ScreenAttract"
Fallback="ScreenAttract"
NextScreen=Branch.OldSM()
PrevScreen="ScreenTitleMenu"
ForceTimer=true
TimerStealth=true
HeaderText=
TimerSeconds=1
TimerOnCommand=zoom,0

[ScreenOldSM]
Fallback="ScreenClear"
NextScreen="ScreenOptionsService"
PrevScreen="ScreenOptionsService"
StartScreen="ScreenOptionsService"
TimerSeconds=10

[ScreenWarning]
Class="ScreenAttract"
Fallback="ScreenAttract"
NextScreen="ScreenCompany"
PrevScreen="ScreenTitleMenu"
TimerSeconds=5

[ScreenCompany]
Class="ScreenAttract"
Fallback="ScreenAttract"
NextScreen="ScreenLogo"
PrevScreen="ScreenTitleMenu"
TimerSeconds=17
TimerMetricsGroup="MenuTimerNoSound"

[ScreenLogo]
Class="ScreenAttract"
Fallback="ScreenAttract"
NextScreen="ScreenHowToPlay"
PrevScreen="ScreenTitleMenu"
TimerSeconds=10

[ScreenHowToPlay]
NextScreen="ScreenDemonstration"
PrevScreen="ScreenTitleMenu"
TimerSeconds=42
#
UseLifeMeterBar=false
UseCharacter=false
UsePad=false
#
UsePlayer=true
PlayerX=SCREEN_CENTER_X
PlayerY=SCREEN_CENTER_Y
PlayerOnCommand=
#
SongBPM=120
NumW2s=10
NumMisses=0

[ScreenDemonstration]
Fallback="ScreenGameplay"
Class="ScreenDemonstration"
#
# NextScreen="ScreenDemonstration"
NextScreen="ScreenWarning"
StartScreen="ScreenTitleMenu"
PlayMusic=false
SecondsToShow=45
TimerMetricsGroup="MenuTimerNoSound"
LightsMode="LightsMode_Demonstration"
DifficultiesToShow="beginner"
ShowCourseModifiersProbability=0
AllowAdvancedModifiers=false
AllowStyleTypes="TwoPlayersTwoSides"

MinSecondsToStep=0

# ????????????????
ShowScoreFrame=true
ScoreFrameX=
ScoreFrameY=
ScoreFrameOnCommand=draworder,2
ScoreFrameOffCommand=
#
PlayMusic=false
ShowCreditDisplay=false

# 02 #
[SongManager]
ExtraStagePlayerModifiers="failimmediate,4 lives,battery"
ExtraStageStageModifiers="failimmediate,4 lives,battery"
ExtraStageSongModifiers="failimmediate,4 lives,battery"
OMESPlayerModifiers="failimmediate,2 lives,battery"
OMESStageModifiers="failimmediate,2 lives,battery"
OMESSongModifiers="failimmediate,2 lives,battery"
ExtraColorMeter=18
ExtraColor=color("#ff0000")	-- red
NumSongGroupColors=1
SongGroupColor1=color("#ffffff") --default white
SongGroupColor1=color("#99ff66") --DDR 1st
SongGroupColor2=color("#ff6633") --DDR 2nd
SongGroupColor3=color("#ffff66") --DDR 3rd
SongGroupColor4=color("#cc66ff") --DDR 4th
SongGroupColor5=color("#66ccff") --DDR 5th
SongGroupColor6=color("#ff9900") --DDR MAX
SongGroupColor7=color("#ff3333") --DDR MAX2
SongGroupColor8=color("#00cc33") --DDR EXTREME
SongGroupColor9=color("#cc0000") --DDR SN
SongGroupColor10=color("#33ccff") --DDR SN2
SongGroupColor11=color("#ff9933") --DDR X
SongGroupColor12=color("#ff33cc") --DDR X2
SongGroupColor13=color("#3366ff") --DDR X3
SongGroupColor14=color("#33ff99") --DDR 2013
SongGroupColor15=color("#33ff99") --DDR 2014
SongGroupColor16=color("#ffffff") --NextGen
SongGroupColor17=color("#ff0000") --Extra1
SongGroupColor18=color("#ff0000") --Extra2

CourseGroupColor1=color("1,1,1,1")

[UnlockManager]
AutoLockChallengeSteps=false
UnlockNames=

[Background]
ShowDancingCharacters=false
UseStaticBackground=UseStaticBackground()
RandomBGStartBeat=-1000
RandomBGChangeMeasures=4
RandomBGChangesWhenBPMChangesAtMeasureStart=true
RandomBGEndsAtLastBeat=false

[BitmapText]
NumRainbowColors=1
RainbowColor1=Color("Black");

[BPMDisplay]
SetNoBpmCommand=stoptweening;stopeffect;maxwidth,128;linear,0.2;diffuse,Color("White");diffusebottomedge,BoostColor(Color("White"),0.875);
SetNormalCommand=stoptweening;stopeffect;maxwidth,128;linear,0.2;diffuse,Color("White");diffusebottomedge,BoostColor(Color("White"),0.875);
SetChangeCommand=stoptweening;stopeffect;maxwidth,128;linear,0.2;diffuse,Color("White");diffusebottomedge,BoostColor(Color("White"),0.875);
SetRandomCommand=stoptweening;maxwidth,128;linear,0.2;diffuse,color("Green");textglowmode,'TextGlowMode_Inner';glowshift;effectcolor1,color("1,1,1,0.05");effectcolor2,color("1,1,1,0.325");
SetExtraCommand=stoptweening;maxwidth,128;linear,0.2;diffuse,Color("Red");diffusebottomedge,BoostColor(Color("Red"),0.5);diffuseshift;effectcolor1,color("1,1,1,1");effectcolor2,color("0.475,0.475,0.475,1");
RandomCycleSpeed=0.02		--  smaller numbers mean the bpm cycles faster
OffCommand=

[CodeDetector]
# For Future Reference:
# @ = Holding
# - = In Conjuction With / Then
# ~ = Released
# + = At The Same Time
ModeMenu=
NextSort1=
NextSort2=
NextSort3=
NextSort4=
NextSteps2=
PrevSteps2=
NextGroup=
PrevGroup=

[CombinedLifeMeterTug]
# We don't use it.
MeterWidth=512-8
MeterHeight=40

[Combo]
ShowComboAt=4

NumberOnCommand=horizalign,right;vertalign,bottom;addx,25;addy,5
LabelOnCommand=horizalign,left;vertalign,bottom;addx,25

	 PulseCommand=%function(self,param) self:stoptweening(); self:zoom(ComboAnim()*param.Zoom); 	  self:linear(0.05); self:zoom(param.Zoom); 	 end
PulseLabelCommand=%function(self,param) self:stoptweening(); self:zoom(ComboAnim()*param.LabelZoom);  self:linear(0.05); self:zoom(param.LabelZoom); end

NumberMaxZoomAt=100
NumberMinZoom=0.4
NumberMaxZoom=0.6
NumberMaxZoomAt=100
#
LabelMinZoom=0.4
LabelMaxZoom=0.4

[HoldJudgment]
HoldJudgmentLetGoCommand=finishtweening;visible,true;diffusealpha,1;zoom,0.27;linear,0.8;sleep,0.4;diffusealpha,0
HoldJudgmentHeldCommand=finishtweening;visible,true;diffusealpha,1;zoom,0.27;linear,0.3;zoom,0.27;sleep,0.4;diffusealpha,0

[HelpDisplay]
TipShowTime=1

[Judgment]
JudgmentW1Command=glowblink;effectperiod,0.025;effectcolor1,color("1,1,1,0");effectcolor2,color("1,1,1,0.2");diffusealpha,1;zoomx,0.34;zoomy,JudgmentZoom();addy,JudgmentYM();linear,0.036;zoom,0.34;addy,JudgmentYP();sleep,0.434;diffusealpha,0
JudgmentW2Command=diffusealpha,1;zoomx,0.34;zoomy,JudgmentZoom();addy,JudgmentYM();linear,0.036;zoom,0.34;addy,JudgmentYP();sleep,0.434;diffusealpha,0
JudgmentW3Command=diffusealpha,1;zoomx,0.34;zoomy,JudgmentZoom();addy,JudgmentYM();linear,0.036;zoom,0.34;addy,JudgmentYP();sleep,0.434;diffusealpha,0
JudgmentW4Command=diffusealpha,1;zoomx,0.34;zoomy,JudgmentZoom();addy,JudgmentYM();linear,0.036;zoom,0.34;addy,JudgmentYP();sleep,0.434;diffusealpha,0
JudgmentW5Command=diffusealpha,1;zoom,0.34;sleep,0.5;diffusealpha,0
JudgmentMissCommand=diffusealpha,1;zoom,0.34;sleep,0.5;diffusealpha,0
# Late/Early 
OffsetOnCommand=
OffsetLateCommand=
OffsetEarlyCommand=


[Protiming]
ProtimingOnCommand=shadowlength,1;horizalign,right;x,30;strokecolor,Color("Outline");skewx,-0.125;textglowmode,"TextGlowMode_Inner";
AverageOnCommand=shadowlength,1;horizalign,left;x,32;y,8;zoom,0.75;diffuse,ColorLightTone( Color("Green") );strokecolor,Color("Outline");skewx,-0.125;textglowmode,"TextGlowMode_Inner";
TextOnCommand=shadowlength,1;horizalign,left;x,32;y,-6;zoom,0.5;strokecolor,Color("Outline");skewx,-0.125;textglowmode,"TextGlowMode_Inner";
#
ProtimingW1Command=finishtweening;diffuse,Color("White");zoom,1.15;glow,Color("White");linear,0.05;zoom,1;glow,Color("Invisible");diffuse,GameColor.Judgment["JudgmentLine_W1"];sleep,2;linear,0.5;diffuse,Color("Invisible");
ProtimingW2Command=finishtweening;diffuse,Color("White");zoom,1.15;glow,Color("White");linear,0.05;zoom,1;glow,Color("Invisible");diffuse,GameColor.Judgment["JudgmentLine_W2"];sleep,2;linear,0.5;diffuse,Color("Invisible");
ProtimingW3Command=finishtweening;diffuse,Color("White");zoom,1.15;glow,Color("White");linear,0.05;zoom,1;glow,Color("Invisible");diffuse,GameColor.Judgment["JudgmentLine_W3"];sleep,2;linear,0.5;diffuse,Color("Invisible");
ProtimingW4Command=finishtweening;diffuse,Color("White");zoom,1.15;glow,Color("White");linear,0.05;zoom,1;glow,Color("Invisible");diffuse,GameColor.Judgment["JudgmentLine_W4"];sleep,2;linear,0.5;diffuse,Color("Invisible");
ProtimingW5Command=finishtweening;diffuse,Color("White");zoom,1.15;glow,Color("White");linear,0.05;zoom,1;glow,Color("Invisible");diffuse,GameColor.Judgment["JudgmentLine_W5"];sleep,2;linear,0.5;diffuse,Color("Invisible");
ProtimingMissCommand=finishtweening;diffusealpha,1;zoom,1.15;glow,GameColor.Judgment["JudgmentLine_Miss"];linear,0.05;zoom,1;glow,Color("Invisible");diffuse,GameColor.Judgment["JudgmentLine_Miss"];sleep,2;linear,0.5;diffuse,Color("Invisible");
#
AveragePulseCommand=finishtweening;diffusealpha,1;zoom,0.75*1.025;decelerate,0.05;zoom,0.75;sleep,2;linear,0.5;diffusealpha,0;
TextPulseCommand=finishtweening;diffusealpha,1;zoom,0.5*1.025;decelerate,0.05;zoom,0.5;sleep,2;linear,0.5;diffusealpha,0;

[DifficultyList]
ItemsSpacingY=24
NumShownItems=8

[FadingBanner]
BannerFadeFromCachedCommand=diffusealpha,1;stoptweening;accelerate,0.05;glow,Color.Alpha( Color("White"), 0.45 );decelerate,0.175;diffusealpha,0;glow,Color("Invisible");

[GameState]
# Default song and sort. these don't really matter
DefaultSort="Group"
#DefaultSort="Preferred"
DefaultSong=""
# How good of a grade you have to get to get an ES/OMES. Locked to an 'AA'
GradeTierForExtra1="Grade_Tier03"
GradeTierForExtra2="Grade_Tier03"
# and how difficult that song you go thas to be
MinDifficultyForExtra="Difficulty_Hard"
# System Direction
AreStagePlayerModsForced=false
AreStageSongModsForced=false
# Let players join while you play if they put in some coins
AllowLateJoin=false
# Various feats that you can earn
ProfileRecordFeats=true
CategoryRecordFeats=true
# Disallow bad names
UseNameBlacklist=false
# Alow OMES
AllowExtra=true
AllowExtra2=true
# Don't let the player change difficulties on an ES/OMES
LockExtraStageSelection=false
# [sm-ssc] Normally, in event mode, the premium value is ignored. Set this
# metric to true to re-gain that behavior.
DisablePremiumInEventMode=false
# Let edit steps be allowed for earning extra stages.
EditAllowedForExtra=false


[GrooveRadar]
Label1OffsetX=0
Label1OffsetY=-98
#--#
Label2OffsetX=-120
Label2OffsetY=-20
#--#
Label3OffsetX=-100
Label3OffsetY=66
#--#
Label4OffsetX=100
Label4OffsetY=66
#--#
Label5OffsetX=110
Label5OffsetY=-20

LabelPreDelayOnCommand=addx,-100;zoom,1.0;diffuse,color("1,1,1,0");sleep,0.6
LabelOnDelay=0.2
LabelPostDelayOnCommand=linear,0.1;glow,color("1,1,1,1");accelerate,0.3;addx,100;zoom,1;diffuse,color("1,1,1,1");glow,color("1,1,1,0")

Label1X=0
Label1Y=-98
#--#
Label2X=-120
Label2Y=-20
#--#
Label3X=-100
Label3Y=66
#--#
Label4X=100
Label4Y=66
#--#
Label5X=110
Label5Y=-20

# Polar graph that shows difficulty stuff in depth
# how thick the line is
EdgeWidth=1
# How visible the middle is
CenterAlpha=0.7
# what to do with each player's part of the graph
RadarValueMapP1OnCommand=glow,color("1,0,0,0.9");
RadarValueMapP2OnCommand=

[Gameplay]
AvoidMineIncrementsCombo=ShockArrows()
ComboIsPerRow=true
ToastyTriggersAt=10000
MinScoreToContinueCombo=AttackPerfectFullCombo()
MinScoreToMaintainCombo=AttackPerfectFullCombo()
UseInternalScoring=GAMESTATE:IsCourseMode()

[LifeMeterBar]
OverOnCommand=
ForceLifeDifficultyOnExtraStage=true
MinScoreToKeepLife=AttackPerfectFullCombo()

[LifeMeterBattery]
MinScoreToKeepLife=AttackPerfectFullCombo()
MaxLives=4
DangerThreshold=2

BatteryP1X=0
BatteryP1Y=0
BatteryP2X=0
BatteryP2Y=0

NumLivesFormat=
NumLivesP1X=0
NumLivesP1Y=0
NumLivesP1GainLifeCommand=visible,false
NumLivesP1LoseLifeCommand=visible,false
NumLivesP2X=92
NumLivesP2Y=0
NumLivesP2GainLifeCommand=visible,false
NumLivesP2LoseLifeCommand=visible,false

[LifeMeterBattery Percent]
# still asking for this even though it's in fallback... -aj
Format=FormatPercentScore
#
PercentP1OnCommand=visible,false
DancePointsP1OnCommand=visible,false
PercentP2OnCommand=visible,false
DancePointsP2OnCommand=visible,false

[MenuTimer]
WarningStart=5
WarningBeepStart=5
MaxStallSeconds=0
#
HurryUpTransition=0

Text1OnCommand=stopeffect;stoptweening;zoom,0.7;x,0;y,0;linear,0.15;addx,20;sleep,0.85;queuecommand,"On";
Text1OffCommand=stoptweening;zoom,0.7;x,20;y,0;linear,0.20;diffusealpha,0;
Text1FormatFunction=function(fSeconds) fSeconds=math.min( 99, math.ceil(fSeconds) ); local digit = math.mod(fSeconds,10); return ""..digit end

Text2OnCommand=stopeffect;stoptweening;zoom,0.7;x,0;y,0;linear,0.15;addx,-11;sleep,0.85;queuecommand,"On";
Text2OffCommand=stopeffect;stoptweening;zoom,0.7;x,-11;y,0;linear,0.20;diffusealpha,0;
Text2FormatFunction=function(fSeconds) fSeconds=math.min( 99, math.ceil(fSeconds) ); local digit = math.floor(fSeconds/10); return ""..digit end

FrameX=
FrameY=
FrameOnCommand=
FrameOffCommand=

#
Warning5Command=diffuseshift;effectperiod,1;effectcolor1,Color.White;effectcolor2,Color.Red;
Warning4Command=diffuseshift;effectperiod,1;effectcolor1,Color.White;effectcolor2,Color.Red;
Warning3Command=diffuseshift;effectperiod,1;effectcolor1,Color.White;effectcolor2,Color.Red;
Warning2Command=diffuseshift;effectperiod,1;effectcolor1,Color.White;effectcolor2,Color.Red;
Warning1Command=diffuseshift;effectperiod,1;effectcolor1,Color.White;effectcolor2,Color.Red;

[MenuTimerNoSound]
Fallback="MenuTimer"
HurryUpTransition=0
WarningBeepStart=0


[MusicWheel]
FadeSeconds=1
SwitchSeconds=0.15
ScrollBarHeight=400;
ScrollBarOnCommand=zoom,0
ShowRoulette=false
ShowRandom=false

ItemTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:z(1-math.abs(offsetFromCenter)); \
	self:x((offsetFromCenter*30)); \
	self:y( offsetFromCenter*105 ); \
	end

NumWheelItems=18
MusicWheelSortOnCommand=
MusicWheelSortOffCommand=
MusicWheelItemSortOnCommand=zoomy,0;linear,0.15;zoomy,1;sleep,0.02
MusicWheelItemSortOffCommand=linear,0.15;zoomy,0;sleep,0.02

#OnlyShowActiveSection=true
#HideActiveSectionTitle=false

ModeMenuChoiceNames="Title,Genre,Group,Artist,TopGrades,Bpm,EasyMeter,Recent,Length,Preferred"

ChoiceTitle="sort,Title"
ChoiceGenre="sort,Genre"
ChoiceGroup="sort,Group"
ChoiceArtist="sort,Artist"
ChoiceTopGrades="sort,TopGrades"
ChoiceBpm="sort,BPM"
ChoiceEasyMeter="sort,EasyMeter"
ChoiceRecent="sort,Recent"
ChoiceLength="sort,Length"
ChoicePreferred="sort,Preferred"
#
ChoicePopularity="sort,Popularity"
ChoiceBeginnerMeter="sort,BeginnerMeter"
ChoiceMediumMeter="sort,MediumMeter"
ChoiceHardMeter="sort,HardMeter"
ChoiceChallengeMeter="sort,ChallengeMeter"
ChoiceDoubleEasyMeter="sort,DoubleEasyMeter"
ChoiceDoubleMediumMeter="sort,DoubleMediumMeter"
ChoiceDoubleHardMeter="sort,DoubleHardMeter"
ChoiceDoubleChallengeMeter="sort,DoubleChallengeMeter"

ChoiceNormalMode="playmode,regular"
ChoiceBattleMode="playmode,battle"


[CourseWheel]
#Fallback="MusicWheel"


ModeMenuChoiceNames="AllCourses,Nonstop,Oni"
# xxx: force nonstop on all courses? sounds lame but meh
ChoiceAllCourses="sort,AllCourses;playmode,nonstop;mod,bar"
ChoiceNonstop="sort,Nonstop;playmode,nonstop;mod,bar"
ChoiceOni="sort,Oni;playmode,oni;mod,battery"
ChoiceEndless="sort,Endless;playmode,endless;mod,bar"
ChoiceSurvival="sort,Oni;playmode,oni;mod,lifetime"

[NonstopWheel]
Fallback="CourseWheel"
ModeMenuChoiceNames="Nonstop"

[OniWheel]
Fallback="CourseWheel"
ModeMenuChoiceNames="Oni"

[MusicWheelItem]
#
WheelNotifyIconX=-3395
WheelNotifyIconY=-95
WheelNotifyIconOnCommand=shadowlength,2;
#
SongNameX=10000
SongNameY=100
SongNameOnCommand=
#
CourseX=-11000
CourseY=-1143
CourseOnCommand=
#
SectionExpandedX=
SectionExpandedY=143
SectionExpandedOnCommand=zoom,0;maxwidth,220;horizalign,center;strokecolor,Color("Outline");draworder,1
#
SectionCollapsedX=
SectionCollapsedY=143
SectionCollapsedOnCommand=zoom,0;maxwidth,220;horizalign,center;strokecolor,Color("Outline");draworder,1
# 
SectionCountX=
SectionCountY=-143
SectionCountOnCommand=zoom,0;strokecolor,Color("Outline")
#
RouletteX=-30
RouletteY=-900
RouletteOnCommand=maxwidth,400;shadowlength,1;basezoom,0.75;rainbowscroll,true;pulse;effectmagnitude,1,1.125,1;effectperiod,1
#
RandomX=
RandomY=143
RandomOnCommand=zoom,0
#
SortX=0
SortY=143
SortOnCommand=maxwidth,360;zoom,0;shadowlength,1;shadowcolor,color("0,0,0,0.325")
#
ModeX=0
ModeY=0
ModeOnCommand=maxwidth,360;zoom,0;strokecolor,Color("Outline")
#
GradeP1X=0
GradeP1Y=0
GradeP2X=0
GradeP2Y=0

[NoteField]
ShowBoard=true
ShowBeatBars=GuideLines()

BarMeasureAlpha=1
Bar4thAlpha=0.25
Bar8thAlpha=0
Bar16thAlpha=0

[PlayerStageStats]
NumGradeTiersUsed=17
GradeTier01IsAllW2s=false
GradeTier02IsAllW2s=false
GradePercentTier01=1.000000 --AAA PFC
GradePercentTier02=0.990000 --AAA
GradePercentTier03=0.950000 --AA+
GradePercentTier04=0.900000 --AA
GradePercentTier05=0.890000 --AA-
GradePercentTier06=0.850000 --A+
GradePercentTier07=0.800000 --A
GradePercentTier08=0.790000 --A-
GradePercentTier09=0.750000 --B+
GradePercentTier10=0.700000 --B
GradePercentTier11=0.690000 --B-
GradePercentTier12=0.650000 --C+
GradePercentTier13=0.600000 --C
GradePercentTier14=0.590000 --C-
GradePercentTier15=0.550000 --D+
GradePercentTier16=0.000000 --D
GradePercentTier17=-99999.000000 --FAILED


[Player]
PercentUntilColorCombo=0
TapJudgmentsUnderField=ComboUnderField()
HoldJudgmentsUnderField=ComboUnderField()
ComboUnderField=ComboUnderField()

# ????????Y????Scripts/02 Other.lua???
JudgmentTransformCommand=%JudgmentTransformCommand
# ????Y??Scripts/02 Other.lua???
ComboTransformCommand=%ComboTransformCommand

ReceptorArrowsYStandard=-161
ReceptorArrowsYReverse=156

HoldJudgmentYStandard=-112
HoldJudgmentYReverse=100

[RollingNumbers]
TextFormat="%07.0f"
ApproachSeconds=0.2
Commify=true
LeadingZeroMultiplyColor=color("#333333FF")

[RollingNumbersSongData]
TextFormat="%07.0f"
ApproachSeconds=0.001
Commify=true
LeadingZeroMultiplyColor=

[RollingNumbersCourseData]
Fallback="RollingNumbers"
ApproachSeconds=0.001
LeadingZeroMultiplyColor=
TextFormat="%09.0f"

[RollingNumbersEvaluation]
TextFormat="%07.0f"
ApproachSeconds=2.3
Commify=true
LeadingZeroMultiplyColor=

[RollingNumbersEXScoreSum]
TextFormat="%17.0f"
ApproachSeconds=1.5
Commify=false
LeadingZeroMultiplyColor=

[RollingNumbersEvaluationSleep]

[RollingNumbersJudgment]
TextFormat="%04.0f"
ApproachSeconds=0.3
Commify=false
LeadingZeroMultiplyColor=

[RollingNumbersScore]
Fallback="RollingNumbers"
ApproachSeconds=0.00001
LeadingZeroMultiplyColor=
TextFormat="%07.0f"

[RollingNumbersEXScore]
Fallback="RollingNumbers"
TextFormat="%04.0f"
LeadingZeroMultiplyColor=
Commify=true

[RollingNumbersEXScoreSong]
TextFormat="%04.0f"
ApproachSeconds=0.1
Commify=false
LeadingZeroMultiplyColor=

[RollingNumbersEXScoreCourse]
TextFormat="%05.0f"
ApproachSeconds=0.1
Commify=false
LeadingZeroMultiplyColor=

[RollingNumbersStageInScore]
TextFormat="%07.0f"
ApproachSeconds=0.001
Commify=false
LeadingZeroMultiplyColor=

[ScoreDisplayNormal]
TextOnCommand=shadowlength,1

[ScoreDisplayOni]
TextX=
TextY=
TextOnCommand=shadowlength,1;diffusebottomedge,BoostColor(Color('Purple'),0.75)
TextOffCommand=

[ScoreDisplayOni Numbers]
TextX=
TextY=
TextOnCommand=shadowlength,1;diffusebottomedge,BoostColor(Color('Purple'),0.75)
TextOffCommand=

[ScoreDisplayLifeTime]
FrameOnCommand=visible,false;spin
#
TimeRemainingY=80
TimeRemainingOnCommand=zoom,1;shadowlength,1;
#
DeltaSecondsOnCommand=y,80;spin;
DeltaSecondsGainLifeCommand=zoom,0.5;

[ScoreDisplayPercentage Percent]
PercentFormat="%2d"
PercentP1OnCommand=shadowlength,1;zoomy,1
PercentP1X=0
PercentP2X=0
PercentP2OnCommand=shadowlength,1;zoomy,1
DancePointsDigits=5
DancePointsP1X=95
DancePointsP1Y=0
#DancePointsP1OnCommand=shadowlength,1;diffusebottomedge,BoostColor(PlayerColor(PLAYER_1),1.5);horizalign,right;zoomy,1.2
DancePointsP1OnCommand=shadowlength,1;horizalign,right;zoomy,1
DancePointsP1OffCommand=
DancePointsP2X=92
DancePointsP2Y=
#DancePointsP2OnCommand=shadowlength,1;diffusebottomedge,BoostColor(PlayerColor(PLAYER_2),1.5);horizalign,right;zoomy,1.2
DancePointsP2OnCommand=shadowlength,1;horizalign,right;zoomy,1
DancePointsP2OffCommand=

[ScoreDisplayRave]
MeterP1OnCommand=draworder,-1
MeterP2OnCommand=draworder,-1;zoomx,-1
LevelP1OnCommand=draworder,105;zoom,0.75;diffuse,ColorLightTone( PlayerColor(PLAYER_1) );strokecolor,ColorDarkTone( PlayerColor(PLAYER_1) );x,-144;skewx,-0.125;
LevelP2OnCommand=draworder,105;draworder,105;zoom,0.75;diffuse,ColorLightTone( PlayerColor(PLAYER_2) );strokecolor,ColorDarkTone( PlayerColor(PLAYER_2) );x,144;skewx,-0.125;

[ScoreKeeperNormal]
PercentScoreWeightCheckpointHit=3
PercentScoreWeightCheckpointMiss=0
PercentScoreWeightHeld=IsGame("pump") and 0 or 3
PercentScoreWeightHitMine=0
PercentScoreWeightMissedHold=0
PercentScoreWeightLetGo=0
PercentScoreWeightMiss=0
PercentScoreWeightW1=3
PercentScoreWeightW2=2
PercentScoreWeightW3=1
PercentScoreWeightW4=0
PercentScoreWeightW5=0
GradeWeightCheckpointHit=2
GradeWeightCheckpointMiss=0
GradeWeightHeld=IsGame("pump") and 0 or 2
GradeWeightHitMine=0
GradeWeightMissedHold=0
GradeWeightLetGo=0
GradeWeightMiss=0
GradeWeightW1=2
GradeWeightW2=2
GradeWeightW3=1
GradeWeightW4=0
GradeWeightW5=0

[ScreenEvaluation Percent]
# TODO: Better name?
PercentP1OnCommand=horizalign,right;shadowlength,1;diffuse,PlayerColor(PLAYER_1);strokecolor,ColorDarkTone( PlayerColor(PLAYER_1) );
PercentP2OnCommand=horizalign,right;shadowlength,1;diffuse,PlayerColor(PLAYER_2);strokecolor,ColorDarkTone( PlayerColor(PLAYER_2) );
PercentRemainderP1OnCommand=horizalign,left;shadowlength,1;diffuse,PlayerColor(PLAYER_1);strokecolor,ColorDarkTone( PlayerColor(PLAYER_1) );
PercentRemainderP2OnCommand=horizalign,left;shadowlength,1;diffuse,PlayerColor(PLAYER_2);strokecolor,ColorDarkTone( PlayerColor(PLAYER_2) );
DancePointsP1X=0
DancePointsP1Y=0
DancePointsP1OnCommand=shadowlength,1;diffuse,PlayerColor(PLAYER_1);strokecolor,ColorDarkTone( PlayerColor(PLAYER_1) );
DancePointsP1OffCommand=
DancePointsP2X=0
DancePointsP2Y=0
DancePointsP2OnCommand=shadowlength,1;diffuse,PlayerColor(PLAYER_2);strokecolor,ColorDarkTone( PlayerColor(PLAYER_2) );
DancePointsP2OffCommand=
DancePointsDigits=2
ApplyScoreDisplayOptions=true
PercentDecimalPlaces=2
PercentTotalSize=5

[StepsDisplayListRow]
# TODO: Make this use DifficultyList?
CapitalizeDifficultyNames=false
NumShownItems=5
ItemsSpacingY=70
MoveCommand=decelerate,0.3
ShowFrame=true
FrameX=
FrameOnCommand=draworder,-1
FrameSetCommand=
#
ShowTicks=true
NumTicks=1
MaxTicks=1
TicksX=-80
TicksY=0
TicksOnCommand=shadowlength,0;zoom,0.65;y,13
TicksSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)) \
	end \
	if param.Meter >= 20 then self:glowshift() else self:stopeffect() end \
end
TicksOffCommand=linear,0.05;zoomy,0
#
ShowMeter=true
MeterX=-50
MeterY=-40
MeterOnCommand=shadowlength,1;zoom,1.1;textglowmode,'TextGlowMode_Inner';horizalign,left;y,13
MeterSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(color("#000000")) \
	end; \
	if param.Meter then \
		if param.Meter >= 20 then \
			self:textglowmode('TextGlowMode_Inner'); \
			self:glowshift(); \
		else \
			self:stopeffect(); \
		end; \
	end; \
end;
MeterOffCommand=linear,0.05;zoomy,0
#
ShowDescription=true
DescriptionX=-98
DescriptionOnCommand=shadowlength,0;zoom,0.7;maxwidth,450;uppercase,true;horizalign,left;y,-17
DescriptionSetCommand=%function(self,param) \
	if self:GetText() == "" then \
		self:settext("Edit"); \
	end; \
	if param.CustomDifficulty then \
		self:diffuse(color("#000000")) \
	end; \
end;
DescriptionOffCommand=linear,0.05;zoomy,0
#
ShowAutogen=true
AutogenX=0
AutogenY=0
#AutogenOnCommand=diffuseshift;effectcolor1,Color.Alpha( Color("Green") , 0.5 );effectcolor2,ColorLightTone( Color("Green") );
AutogenOnCommand=blend,Blend.Add;diffuseshift;effectcolor1,color("#FFCC00FF");effectcolor2,color("#FFCC0088");
#
ShowStepsType=false
StepsTypeX=-64-8
StepsTypeY=0
StepsTypeOnCommand=
StepsTypeSetCommand=

[StreamDisplay]
# life meter
# PillTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
# 	local fItemWidth = ( WideScale(256,350) / numItems ) \
# 	self:zoomtowidth(fItemWidth); \
# end;
NumPills=26
PillTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	local spacing_x=11.3; \
	self:zoomtoheight(9); \
	self:zoomtowidth(34); \
	self:x(8+(itemIndex-(numItems/2))*spacing_x); \
	self:rotationz(-90); \
	self:MaskSource(); \
end
TextureCoordScaleX=30
AlwaysBounceNormalBar=false

[TextBanner]
TitleOnCommand=horizalign,center;shadowlength,0;diffuse,1,1,1,1;strokecolor,0,0,0,1
SubtitleOnCommand=horizalign,left;shadowlength,0;diffuse,0,0,0,1;strokecolor,1,1,1,1
ArtistOnCommand=horizalign,left;shadowlength,0;diffuse,0,0,0,0
ArtistPrependString=""

[TextBannerCourse]
Fallback="TextBanner"
TitleOnCommand=horizalign,left;shadowlength,0;diffuse,0,0,0,1;strokecolor,1,1,1,1
SubtitleOnCommand=horizalign,left;shadowlength,0;diffuse,0,0,0,1;strokecolor,1,1,1,1
ArtistOnCommand=horizalign,left;shadowlength,0;diffuse,0,0,0,1;strokecolor,1,1,1,1

ArtistPrependString=""
AfterSetCommand=visible,true;
[ScreenCaution]
#TimerSeconds=20
TimerSeconds=9
NextScreen="ScreenSelectMusic"
PrevScreen=Branch.TitleMenu()
TimerStealth=true
TimerOnCommand=visible,false
PrepareScreens=

[ScreenSystemLayer]
ShowCreditDisplay=true
CreditsJoinOnly=false
ShowCoinsAndCredits=true

CreditsP1X=SCREEN_LEFT+102
CreditsP1Y=SCREEN_BOTTOM-10
CreditsP1RefreshCreditTextMessageCommand=playcommand,"UpdateText";
CreditsP1CoinInsertedMessageCommand=playcommand,"UpdateText";
CreditsP1CoinInsertedMessageCommand=playcommand,"UpdateText";
CreditsP1PlayerJoinedMessageCommand=playcommand,"UpdateText";
CreditsP1ScreenChangedMessageCommand=playcommand,"UpdateVisible";queuecommand,"On"
CreditsP1OnCommand=maxwidth,325;zoom,0.65;strokecolor,color("#000000")
CreditsP1OffCommand=

CreditsP2X=SCREEN_RIGHT-102
CreditsP2Y=SCREEN_BOTTOM-10
CreditsP2RefreshCreditTextMessageCommand=playcommand,"UpdateText";
CreditsP2CoinInsertedMessageCommand=playcommand,"UpdateText";
CreditsP2PlayerJoinedMessageCommand=playcommand,"UpdateText";
CreditsP2ScreenChangedMessageCommand=playcommand,"UpdateVisible";queuecommand,"On"
CreditsP2OnCommand=maxwidth,325;zoom,0.65;strokecolor,color("#000000")
CreditsP2OffCommand=

[ScreenWithMenuElements]
WaitForChildrenBeforeTweening=true

ScreenInDelay=0
ScreenOutDelay=0

FOV=90
ShowHeader=true
HeaderX=SCREEN_CENTER_X
HeaderY=SCREEN_TOP+25
HeaderOnCommand=draworder,5;addy,-50;linear,0.175;addy,50
HeaderOffCommand=linear,0.175;addy,-50

ShowFooter=true
FooterX=SCREEN_CENTER_X
FooterY=SCREEN_BOTTOM+60
FooterOnCommand=draworder,5;zoomy,1;linear,0.2;addy,-100
FooterOffCommand=linear,0.175;addy,100

TimerMetricsGroup="MenuTimer"
TimerX=SCREEN_CENTER_X+360+50
TimerY=SCREEN_CENTER_Y-306
TimerOnCommand=draworder,190;zoom,0;linear,0.25;zoom,1
TimerOffCommand=linear,0.25;zoom,0;
TimerStealth=false

StageDisplayNumberOffset=1

# This is useful 
ArcadeOverlayX=
ArcadeOverlayY=
ArcadeOverlayOnCommand=draworder,100
ArcadeOverlayOffCommand=
#
ArcadeOverlay.TextX=SCREEN_CENTER_X
ArcadeOverlay.TextY=SCREEN_BOTTOM-48
ArcadeOverlay.TextOnCommand=
ArcadeOverlay.TextOffCommand=

[ScreenWithMenuElementsBlank]
ShowHeader=false
ShowFooter=false

[ScreenInit]
PrepareScreens="ScreenTitleMenu,ScreenTitleJoin"
GroupedScreens="ScreenInit,ScreenTitleJoin,ScreenTitleMenu"
PersistScreens="ScreenInit,ScreenTitleJoin,ScreenTitleMenu"

[ScreenTitleMenu]
PrevScreen="ScreenWarning"

ShowHeader=false
ShowFooter=false
#
WrapScroller=false
ScrollerTransform=function(self,offset,itemIndex,numItems) self:x(0); end
ScrollerSecondsPerItem=0
ScrollerNumItemsToDraw=20
ScrollerX=SCREEN_CENTER_X
ScrollerY=SCREEN_CENTER_Y+118
ScrollerOnCommand=zoom,0.69;diffusealpha,0;decelerate,0.55;diffusealpha,1
#
ChoiceNames="GameStart,Edit,Options,Exit"
DefaultChoice="GameStart"
ChoiceGameStart="applydefaultoptions;text,GAME MODE;playmode,regular;screen,ScreenSelectLanguage"
ChoiceEdit="text,EDIT MODE;screen,ScreenEditMenu"
ChoiceOptions="text,OPTIONS;screen,ScreenOptionsService"
ChoiceExit="screen,ScreenExit;text,EXIT"

[ScreenSelectLanguage]
Fallback="ScreenWithMenuElements"
PrevScreen=Branch.TitleMenu()
NextScreen=Branch.Profile()
StopMusicOnBack=true

TimerSeconds=20
TimerOnCommand=draworder,999;x,SCREEN_CENTER_X+209;y,SCREEN_TOP+21;visible,PREFSMAN:GetPreference("MenuTimer");
TimerOffCommand=linear,0.25;zoom,0.9;diffusealpha,0;

[ScreenProfileLoad]
Fallback="ScreenSelectProfile"
#
ShowHeader=true
HeaderOffCommand=draworder,5
ShowFooter=false
ShowHelp=false

NextScreen="ScreenSelectProfile"

CodeNames="Start"
CodeStart="Start"

[ScreenSelectProfile]
WaitForChildrenBeforeTweening=true
Fallback="ScreenWithMenuElements"
Class="ScreenSelectProfile"
TimerSeconds=20
TimerOnCommand=draworder,999;x,SCREEN_CENTER_X+209;y,SCREEN_TOP+21;visible,PREFSMAN:GetPreference("MenuTimer");
TimerOffCommand=linear,0.25;zoom,0.9;diffusealpha,0;
#
ScreenOnCommand=%function(self) self:lockinput(3); end;
#
NextScreen="ScreenSelectStyle"
PrevScreen=Branch.TitleMenu()
StartScreen="ScreenTitleMenu"
#
ShowHeader=true
ShowFooter=false
#
CodeNames=SelectProfileKeys()
CodeUp="+Left"
CodeUp2="+MenuLeft"
CodeDown="+MenuRight"
CodeDown2="+Right"
# Holding Start let us skip ( annoying )
CodeStart="Start"
CodeBack="Back"
CodeCenter="Center"
CodeDownLeft="DownLeft"
CodeDownRight="DownRight"

ScreenOutDelay=1
ShowHelp=false

[ScreenSelectCharacters]
Fallback="ScreenWithMenuElementsBlank"
PrevScreen=Branch.TitleMenu()
StartScreen="ScreenTitleMenu"
ScreenOutDelay=1
ShowHeader=true
TimerSeconds=20
TimerOnCommand=x,SCREEN_RIGHT-163;y,SCREEN_TOP+102;draworder,999;visible,PREFSMAN:GetPreference("MenuTimer");
TimerOffCommand=linear,0.25;zoom,1.5;diffusealpha,0;

[ScreenProfileOptionsSave]
Fallback="ScreenProfileSave"
NextScreen="ScreenCaution"

[ScreenSelectStyle]
Class="ScreenSelectMaster"
PrevScreen=Branch.TitleMenu()
TimerSeconds=20
TimerOnCommand=draworder,999;x,SCREEN_CENTER_X+209;y,SCREEN_TOP+21;visible,PREFSMAN:GetPreference("MenuTimer");
TimerOffCommand=linear,0.25;zoom,0.9;diffusealpha,0;
ChoiceNames="Single,Versus,Double"
DefaultChoice="Single"
ChoiceSingle="name,Single;style,single;text,Single;screen,ScreenCaution"
ChoiceVersus="name,Versus;style,versus;text,Versus;screen,ScreenCaution"
ChoiceDouble="name,Double;style,double;text,Double;screen,ScreenCaution"
ShowHeader=true
ShowFooter=false
ShowHelp=false

FOV=90
UpdateOnMesage=""

PerChoiceScrollElement=false
PerChoiceIconElement=false

ShowScroller=true
WrapScroller=true
LoopScroller=true
WrapCursor=true
ShowIcon=true
UseIconMetrics=true

ScrollerSecondsPerItem=0.3
ScrollerX=SCREEN_CENTER_X
ScrollerY=SCREEN_CENTER_Y

ScrollerOnCommand=%function(self) \
	self:fov(90); \
	self:SetDrawByZPosition(true);\
end;

ScrollerOffCommand=
ScrollerTransform=function(self,ofs,i,n) \
	local t=ofs*math.pi*2/n; \
	self:x(math.sin(t)*500); \
	self:y(math.cos(t)*200-74); \
	self:z(math.cos(t)*300-300); \
	self:draworder( math.abs(ofs) ); \
end

IconGainFocusCommand=stoptweening;bounceend,0.125;diffusealpha,1;zoomy,1;draworder,101
IconLoseFocusCommand=stoptweening;decelerate,0.25;diffusealpha,0;zoomy,0;draworder,101

IconChoiceSingleX=
IconChoiceSingleY=
IconChoiceSingleOnCommand=draworder,1
IconChoiceSingleOffCommand=

IconChoiceDoubleX=
IconChoiceDoubleY=
IconChoiceDoubleOnCommand=draworder,1
IconChoiceDoubleOffCommand=

IconChoiceVersusX=
IconChoiceVersusY=
IconChoiceVersusOnCommand=draworder,1
IconChoiceVersusOffCommand=

InfoGainFocusCommand=stoptweening;zoomy,0;linear,0.2;zoomy,1;draworder,101
InfoLoseFocusCommand=stoptweening;zoomy,1;linear,0.05;zoomy,0;draworder,101

SmallInfoGainFocusCommand=stoptweening;linear,0.25;diffuse,1,1,1,1;bob;effectperiod,0.533;effectmagnitude,0,3,0
SmallInfoLoseFocusCommand=stopeffect;stoptweening;linear,0.25;diffuse,0.5,0.5,0.5,1;

[ScreenSelectPlayMode]
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"
PrevScreen=Branch.TitleMenu()
TimerSeconds=20
ShowHeader=true
ShowFooter=false
ShowStyleIcon=false
ShowHelp=true

NumChoicesOnPage1=2

DefaultChoice="Music"
ChoiceNames="Music,Oni"
ChoiceMusic="applydefaultoptions;name,Music;text,Normal;playmode,regular;screen,ScreenCaution;setenv,sMode,Normal"
ChoiceOni="applydefaultoptions;name,Oni;text,Extended;playmode,nonstop;mod,1x;screen,ScreenSelectPlayCourseMode;setenv,sMode,Extended"

UpdateOnMesage=""

PerChoiceIconElement=false

ShowScroller=false
WrapScroller=true
ScrollerX=SCREEN_CENTER_X
ScrollerY=SCREEN_CENTER_Y-60
ScrollerOnCommand=SetFastCatchup,true;
ScrollerOffCommand=decelerate,0.8;y,SCREEN_CENTER_Y;sleep,2;linear,0.1;zoomy,0
#
ShowIcon=true
UseIconMetrics=true
#
IconGainFocusCommand=stoptweening;glowshift;decelerate,0.125;zoom,1;
IconLoseFocusCommand=stoptweening;stopeffect;decelerate,0.125;zoom,0.6;
# IconMinZoom=0.5
# IconBaseZoom=0.6
#
#
IconChoiceMusicX=SCREEN_CENTER_X-140
IconChoiceMusicY=SCREEN_CENTER_Y-50
IconChoiceMusicOnCommand=zoom,0;sleep,0.1;bounceend,0.1175;zoom,1
IconChoiceMusicOffCommand=sleep,0.4;linear,0.10;addx,SCREEN_WIDTH
IconChoiceMusicGainFocusCommand=stoptweening;decelerate,0.125;zoom,1;x,SCREEN_CENTER_X-140;y,SCREEN_CENTER_Y-50;
IconChoiceMusicLoseFocusCommand=stoptweening;decelerate,0.125;zoom,0.85;x,SCREEN_CENTER_X-250;y,SCREEN_CENTER_Y-60;

IconChoiceOniX=SCREEN_CENTER_X+140
IconChoiceOniY=SCREEN_CENTER_Y-50
IconChoiceOniOnCommand=zoom,0;sleep,0.1;bounceend,0.1175;zoom,0.85
IconChoiceOniOffCommand=sleep,0.4;linear,0.10;addx,-SCREEN_WIDTH
IconChoiceOniGainFocusCommand=stoptweening;decelerate,0.125;zoom,1;x,SCREEN_CENTER_X+140;y,SCREEN_CENTER_Y-50;
IconChoiceOniLoseFocusCommand=stoptweening;decelerate,0.125;zoom,0.85;x,SCREEN_CENTER_X+250;y,SCREEN_CENTER_Y-60;

[ScreenSelectPlayCourseMode]
#PersistScreens="ScreenSelectPlayCourseMode,ScreenSelectCourse"
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"
NextScreen=Branch.GetGameInformationScreen
PrevScreen=Branch.TitleMenu()
TimerSeconds=40
TimerOnCommand=draworder,90;zoom,0;linear,0.25;zoom,1
TimerOffCommand=linear,0.25;zoom,0;
#
ScreenOutDelay=3
#
DefaultChoice="Extended"
ChoiceNames="Extended,Oni"
#
PerChoiceIconElement=false
#
ShowScroller=true
WrapScroller=true
ScrollerX=SCREEN_CENTER_X
ScrollerY=SCREEN_CENTER_Y
ScrollerOnCommand=SetFastCatchup,true;
ScrollerOffCommand=
#
ShowBackgroundFrame=true
BackgroundFrameX=SCREEN_CENTER_X
BackgroundFrameY=SCREEN_CENTER_Y-60
BackgroundFrameOnCommand=diffuse,Color("Black");diffusealpha,0.7
BackgroundFrameOffCommand=decelerate,0.8;y,SCREEN_CENTER_Y;sleep,2;linear,0.1;zoomy,0
#
ShowIcon=true
UseIconMetrics=true
ShowFooter=false
#
IconGainFocusCommand=stoptweening;stopeffect;decelerate,0.125;zoom,1;
IconLoseFocusCommand=stoptweening;stopeffect;decelerate,0.125;zoom,0.6;
#
IconChoiceExtendedX=SCREEN_CENTER_X-120
IconChoiceExtendedY=SCREEN_CENTER_Y-58
IconChoiceExtendedOnCommand=zoom,0;bounceend,0.35;zoom,1
IconChoiceExtendedOffCommand=linear,0.1175;zoomy,0
#
IconChoiceOniX=SCREEN_CENTER_X+120
IconChoiceOniY=SCREEN_CENTER_Y-58
IconChoiceOniOnCommand=zoom,0;bounceend,0.35;zoom,1
IconChoiceOniOffCommand=linear,0.1175;zoomy,0

ChoiceExtended="applydefaultoptions;name,Extended;text,Extended;playmode,nonstop;screen,ScreenCaution;setenv,sMode,Extended"
ChoiceOni="applydefaultoptions;name,Oni;text,Oni;playmode,oni;screen,ScreenCaution;setenv,sMode,Oni"

[ScreenTutorial]
Fallback="ScreenCaution"
NextScreen="ScreenSelectStyleTutorial"
PrevScreen="ScreenSelectPlayMode"
TimerSeconds=40

[ScreenSelectDifficulty]
Fallback="ScreenSelectMaster"

ChoiceNames="1,2,3,4,5"
Choice1="difficulty,beginner;screen,ScreenStageInformation"
Choice2="difficulty,easy;screen,ScreenStageInformation"
Choice3="difficulty,medium;screen,ScreenStageInformation"
Choice4="difficulty,hard;screen,ScreenStageInformation"
Choice5="difficulty,challenge;screen,ScreenStageInformation"

DefaultChoice="1"

PerChoiceScrollElement=true
PerChoiceIconElement=false

ShowScroller=true
ShowIcon=false
UseIconMetrics=false
WrapScroller=false
WrapCursor=false

ScrollerSecondsPerItem=0.3
ScrollerP1X=SCREEN_CENTER_X-310+20
ScrollerP1Y=SCREEN_CENTER_Y
ScrollerP2X=SCREEN_CENTER_X+310-20
ScrollerP2Y=SCREEN_CENTER_Y
ScrollerOnCommand=zbuffer,true;fov,80;zoom,0;bounceend,0.2;zoom,0.8
ScrollerOffCommand=bouncebegin,0.1
ScrollerTransform=function(self,offsetFromCenter,itemIndex,numItems) self:y( offsetFromCenter*100 ); end


SharedSelection=false
UseTwoLists=true

[ScreenSelectMusic]
WaitForChildrenBeforeTweeningOut=false
TimerSeconds=90
TimerOnCommand=x,SCREEN_CENTER_X+287;y,SCREEN_TOP+15;visible,PREFSMAN:GetPreference("MenuTimer");
TimerOffCommand=linear,0.25;zoom,0.9;diffusealpha,0;
#the things you can learn from _fallback#
UsePlayerSelectMenu=true
SelectMenuAvailable=true
SelectMenuScreenName=(GAMESTATE:IsExtraStage() or GAMESTATE:IsExtraStage2()) and "ScreenPlayerOptionsR" or "ScreenPlayerOptions"
TwoPartSelection=true
CancelTwoPartSelectButton1="MenuUp"
CancelTwoPartSelectButton2="MenuDown"
WrapChangeSteps=false

MusicWheelX=SCREEN_CENTER_X
MusicWheelY=SCREEN_CENTER_Y+25
MusicWheelOnCommand=zoom,0.4;SetDrawByZPosition,true;fov,60;diffusealpha,0;sleep,0.4;linear,0.2;diffusealpha,1
MusicWheelOffCommand=
MusicWheelStartSelectingStepsMessageCommand=diffuse,1,1,1,1;sleep,0.05;diffuse,1,1,1,0;sleep,0.05;diffuse,1,1,1,1;sleep,0.05;diffuse,1,1,1,0;sleep,0.05;diffuse,1,1,1,1;sleep,0.05;diffuse,1,1,1,0;sleep,0.05;linear,0.05;diffusealpha,0
MusicWheelSongUnchosenMessageCommand=diffusealpha,0;sleep,0.4;linear,0.2;diffusealpha,1
#
ShowStageDisplay=true
StageDisplayX=SCREEN_CENTER_X-230
StageDisplayY=SCREEN_TOP+25-3-99
StageDisplayOnCommand=draworder,105;zoom,0.85
StageDisplayOffCommand=linear,0.05;zoomy,0;
#
ShowBanner=false
BannerOnCommand=visible,false
#
#�۳Ъ�shock arrow���ܹϥ�
ShowShockArrowDisplayP1=true
ShockArrowDisplayP1X=SCREEN_CENTER_X-603
ShockArrowDisplayP1Y=SCREEN_CENTER_Y+80
ShockArrowDisplayP1OnCommand=player,PLAYER_1;draworder,100;zoom,0;decelerate,0.2;zoom,0.55;glowblink;effectperiod,0.02
ShockArrowDisplayP1OffCommand=decelerate,0.2;zoom,0;
ShockArrowDisplayP1PlayerJoinedMessageCommand=%function(self,params) if params.Player == PLAYER_1 then self:playcommand("On") end end
#
ShowShockArrowDisplayP2=true
ShockArrowDisplayP2X=SCREEN_CENTER_X+603
ShockArrowDisplayP2Y=SCREEN_CENTER_Y+80
ShockArrowDisplayP2OnCommand=player,PLAYER_2;draworder,100;zoom,0;decelerate,0.2;zoom,0.55;glowblink;effectperiod,0.02
ShockArrowDisplayP2OffCommand=decelerate,0.2;zoom,0;
ShockArrowDisplayP2PlayerJoinedMessageCommand=%function(self,params) if params.Player == PLAYER_2 then self:playcommand("On") end end
#

CodeNames="OpenPanes1,OpenPanes3,ClosePanes,OpenPanesA1,OpenPanesA3,ClosePanesA,SortList,SortList2,SortList3"

CodeOpenPanes1="Left-Up"	--difficulty
CodeOpenPanes3="Left-Down"	--scores
CodeClosePanes="Down-Right"	--close

CodeOpenPanesA1="MenuLeft-MenuUp"	--difficulty another side
CodeOpenPanesA3="MenuLeft-MenuDown"	--scores another side
CodeClosePanesA="MenuRight-MenuDown"	--close another side

CodeSortList="Left-Right"
CodeSortList2="MenuLeft-MenuRight"
CodeSortList3=PREFSMAN:GetPreference("OnlyDedicatedMenuButtons") == false and "@MenuLeft-@MenuRight-Start" or ""

PreviousSongButton="MenuLeft"
NextSongButton="MenuRight"

MusicWheelCodeMessageCommand=%function(self, params) \
	if not GAMESTATE:IsCourseMode() and (params.Name=="SortList" or params.Name=="SortList2" or params.Name=="SortList3") then \
		SCREENMAN:AddNewScreenToTop("ScreenSortList"); \
	end; \
end;
MusicWheelSortMessageCommand=%function(self, params) \
	self:ChangeSort('SortOrder_'..params.order) \
end;

[ScreenSortList]
Fallback="ScreenWithMenuElements"
NextScreen="ScreenSelectMusic"
PrevScreen="ScreenSelectMusic"
HeaderOnCommand=visible,false
FooterOnCommand=visible,false
HelpOnCommand=visible,false
ShowCreditDisplay=false
PlayMusic=false

[OptionsList]
CodeNames=""
TopMenus=""
TopMenu=""
DirectLines="Timing"
ItemsSpacingY=18
MaxItemsBeforeSplit=26
ItemsSplitWidth=150
TextOnCommand=zoom,0.86;shadowlength,0;horizalign,left
TextOffCommand=
TextTweenOffCommand=stoptweening;linear,0.2;diffusealpha,0
TextTweenOnCommand=stoptweening;linear,0.2;diffusealpha,1
TextResetCommand=
UnderlineOnCommand=
UnderlineOffCommand=
UnderlineSetTwoRowsCommand=
UnderlineSetOneRowCommand=
UnderlineShowCommand=visible,true
UnderlineHideCommand=visible,false
UnderlineTweenOnCommand=stoptweening;linear,0.2;diffusealpha,1
UnderlineTweenOffCommand=stoptweening;linear,0.2;diffusealpha,0
UnderlineResetCommand=
#CursorOnCommand=bounce;effectclock,'beat';effectmagnitude,-6,0,0
CursorOnCommand=
CursorPositionTwoRowsCommand=stoptweening;decelerate,0.06
CursorPositionOneRowCommand=stoptweening;decelerate,0.06
CursorTweenOnCommand=stoptweening;linear,0.2;diffusealpha,1
CursorTweenOffCommand=stoptweening;linear,0.2;diffusealpha,0
CursorResetCommand=
OptionsListOnCommand=
OptionsListOffCommand=
OptionsListTweenOffCommand=
OptionsListTweenOnCommand=
OptionsListResetCommand=
OptionsListTweenOutForwardCommand=playcommandonleaves,"FadeOff"
OptionsListTweenOutBackwardCommand=playcommandonleaves,"FadeOff"
OptionsListTweenInForwardCommand=playcommandonleaves,"FadeOn"
OptionsListTweenInBackwardCommand=playcommandonleaves,"FadeOn"
OptionsListFadeOffCommand=stoptweening;linear,0.15;diffusealpha,0
OptionsListFadeOnCommand=stoptweening;linear,0.15;diffusealpha,1
LineSongMenu="list,SongMenu"
LineCourseMenu="list,CourseMenu"
LineTiming="lua,OptionRowProTiming()"
Fallback="ScreenWithMenuElements"

[OptionsListP1]
Fallback="OptionsList"

[OptionsListP2]
Fallback="OptionsList"

[ScreenSelectCourseOni]
Fallback="ScreenSelectCourse"

[ScreenSelectCourse]

Fallback="ScreenSelectMusic"
TimerOnCommand=draworder,90;zoom,0;linear,0.25;zoom,1
TimerOffCommand=linear,0.25;zoom,0;
UsePlayerSelectMenu=true
SelectMenuAvailable=true
SelectMenuScreenName=GAMESTATE:GetPlayMode()=='PlayMode_Oni' and "ScreenPlayerOptionsR" or "ScreenPlayerOptions"

ShowBPMDisplay=true
BPMDisplayX=SCREEN_CENTER_X+88
BPMDisplayY=SCREEN_CENTER_Y-227
BPMDisplayOnCommand=maxwidth,128;zoom,0.85;horizalign,right;
#OffCommand defined in ScreenSelectMusic decorations

ShowBPMLabel=true
BPMLabelX=SCREEN_CENTER_X+96-6-2+10
BPMLabelY=SCREEN_CENTER_Y-284-12-9-9999
BPMLabelOnCommand=zoom,0.85;
BPMLabelOffCommand=bouncebegin,0.15;zoomx,0;

MusicWheelType=GAMESTATE:GetPlayMode() == 'PlayMode_Oni' and "OniWheel" or "NonstopWheel"
MusicWheelX=SCREEN_CENTER_X
MusicWheelY=SCREEN_CENTER_Y+10
MusicWheelOnCommand=zoom,0.6;SetDrawByZPosition,true;fov,60;addy,1000;decelerate,0.3;addy,-1000;diffuse,1,1,1,1;sleep,0.05;diffuse,1,1,1,0;sleep,0.05;diffuse,1,1,1,1;sleep,0.05;diffuse,1,1,1,0;sleep,0.05;diffuse,1,1,1,1;sleep,0.05;diffuse,1,1,1,0;sleep,0.05;diffusealpha,1
MusicWheelOffCommand=diffuse,1,1,1,1;sleep,0.05;diffuse,1,1,1,0;sleep,0.05;diffuse,1,1,1,1;sleep,0.05;diffuse,1,1,1,0;sleep,0.05;diffuse,1,1,1,1;sleep,0.05;diffuse,1,1,1,0;sleep,0.05;linear,0.05;diffusealpha,0
#
#
ShowCourseContentsMyListP1=true
CourseContentsMyListP1X=SCREEN_LEFT+120+500
CourseContentsMyListP1Y=SCREEN_CENTER_Y-90-15-70
CourseContentsMyListP1OffCommand=linear,0.15;addx,-500
ShowCourseContentsMyListP2=true
CourseContentsMyListP2X=SCREEN_RIGHT-120
CourseContentsMyListP2Y=SCREEN_CENTER_Y-90-15-70
CourseContentsMyListP2OffCommand=linear,0.15;addx,500

ShowCourseContentsMyListAP1=true
CourseContentsMyListAP1X=SCREEN_RIGHT-175
CourseContentsMyListAP1Y=SCREEN_CENTER_Y-90-15-100
CourseContentsMyListAP1OffCommand=linear,0.15;addx,500
ShowCourseContentsMyListAP2=true
CourseContentsMyListAP2X=SCREEN_LEFT+175
CourseContentsMyListAP2Y=SCREEN_CENTER_Y-90-15-100
CourseContentsMyListAP2OffCommand=linear,0.15;addx,-500
#
ShowCourseContentsList=false
CourseContentsListX=SCREEN_CENTER_X+270
CourseContentsListY=SCREEN_TOP+227
CourseContentsListOnCommand=zoom,1.12;addx,-SCREEN_CENTER_X;decelerate,0.35;addx,SCREEN_CENTER_X
CourseContentsListOffCommand=bouncebegin,0.15;zoomx,0;
#
ShowNumCourseSongs=GAMESTATE:IsCourseMode()
NumCourseSongsX=SCREEN_CENTER_X-447
NumCourseSongsY=SCREEN_TOP+60
NumCourseSongsOnCommand=zoom,1;zoomx,1.3;strokecolor,Color("Outline");shadowlength,1;draworder,100
NumCourseSongsOffCommand=bouncebegin,0.15;zoom,0;diffusealpha,0;

ShowGrooveRadarP1_Default=GAMESTATE:IsHumanPlayer(PLAYER_1)
GrooveRadarP1_DefaultX=SCREEN_LEFT+260-15
GrooveRadarP1_DefaultY=SCREEN_CENTER_Y-70
GrooveRadarP1_DefaultOnCommand=zoom,1.05;draworder,1
GrooveRadarP1_DefaultOffCommand=linear,0.15;diffusealpha,0
GrooveRadarP1_DefaultTweenOnCommand=stoptweening;linear,0.135
GrooveRadarP1_DefaultTweenOffCommand=stoptweening;linear,0.135

ShowGrooveRadarP2_Default=GAMESTATE:IsHumanPlayer(PLAYER_2)
GrooveRadarP2_DefaultX=SCREEN_RIGHT-260+15
GrooveRadarP2_DefaultY=SCREEN_CENTER_Y-70
GrooveRadarP2_DefaultOnCommand=zoom,1.05;draworder,1
GrooveRadarP2_DefaultOffCommand=linear,0.15;diffusealpha,0
GrooveRadarP2_DefaultTweenOnCommand=stoptweening;linear,0.135
GrooveRadarP2_DefaultTweenOffCommand=stoptweening;linear,0.135

ShowGrooveRadarP1_Pane=GAMESTATE:IsHumanPlayer(PLAYER_1)
GrooveRadarP1_PaneX=SCREEN_LEFT+175
GrooveRadarP1_PaneY=SCREEN_CENTER_Y-108+12
GrooveRadarP1_PaneOnCommand=zoom,0.94;draworder,1
GrooveRadarP1_PaneOffCommand=linear,0.15;diffusealpha,0
GrooveRadarP1_PaneTweenOnCommand=stoptweening;linear,0.135
GrooveRadarP1_PaneTweenOffCommand=stoptweening;linear,0.135

ShowGrooveRadarP2_Pane=GAMESTATE:IsHumanPlayer(PLAYER_2)
GrooveRadarP2_PaneX=SCREEN_RIGHT-175-119
GrooveRadarP2_PaneY=SCREEN_CENTER_Y-108+12
GrooveRadarP2_PaneOnCommand=zoom,0.94;draworder,1
GrooveRadarP2_PaneOffCommand=linear,0.15;diffusealpha,0
GrooveRadarP2_PaneTweenOnCommand=stoptweening;linear,0.135
GrooveRadarP2_PaneTweenOffCommand=stoptweening;linear,0.135

[StepsDisplayEvaluation]
Fallback="StepsDisplay"
ShowTicks=false
ShowMeter=true
ZeroMeterString="?"
MeterX=0
MeterY=6
#���q����
MeterOnCommand=shadowlength,0;textglowmode,'TextGlowMode_Inner';zoom,0.35
;diffuse,color("#000000");
MeterSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(color("#ffffff")) \
	end; \
	if GAMESTATE:IsCourseMode() then\
		self:diffuse(color("#ffffff")) \
	elseif GAMESTATE:HasEarnedExtraStage() and GAMESTATE:IsExtraStage() and not GAMESTATE:IsExtraStage2() then\
		self:diffuse(color("#000000")) \
	elseif GAMESTATE:IsExtraStage() or GAMESTATE:IsExtraStage2() then \
		self:diffuse(color("#ffffff")) \
	else \
		self:diffuse(color("#ffffff")) \
	end; \
	if param.Meter then \
		if param.Meter >= 20 then \
			self:textglowmode('TextGlowMode_Inner'); \
			self:glowshift(); \
		else \
			self:stopeffect(); \
		end; \
	end; \
	if param.PlayerNumber==PLAYER_1 then \
		self:addx(8); \
	elseif param.PlayerNumber==PLAYER_2 then \
		self:addx(-8); \
	end; \
end;
ShowDescription=true
DescriptionX=0
DescriptionY=-2
DescriptionOnCommand=shadowlength,1;uppercase,true;zoom,0.22;maxwidth,512
DescriptionOffCommand=
DescriptionSetCommand=%function(self,param) \
	if self:GetText() == "" then \
		self:settext("Edit"); \
	end; \
	if param.CustomDifficulty then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)); \
		self:shadowcolor(color("#000000")); \
	end; \
end;
#
ShowAutogen=false
AutogenX=40
AutogenY=0
AutogenOnCommand=
AutogenSetCommand=%function(self,param) if param.Difficulty then self:diffuse(CustomDifficultyToLightColor(param.Difficulty)); self:strokecolor(CustomDifficultyToDarkColor(param.Difficulty)); end end
#
ShowStepsType=false
StepsTypeX=-20
StepsTypeY=7
StepsTypeOnCommand=zoom,0.45

ShowFrame=true
FrameX=
FrameOnCommand=zoom,0
FrameSetCommand=

[StepsDisplay]
ShowFrame=true
FrameX=
FrameOnCommand=draworder,-1
FrameSetCommand=
#
ShowTicks=true
NumTicks=1
MaxTicks=1
TicksX=-80
TicksY=0
TicksOnCommand=shadowlength,0;zoom,0.65;y,13
TicksSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)) \
	end \
	if param.Meter >= 20 then self:glowshift() else self:stopeffect() end \
end
TicksOffCommand=linear,0.05;zoomy,0
#
ShowMeter=true
MeterX=-50
MeterOnCommand=shadowlength,1;zoom,1.1;textglowmode,'TextGlowMode_Inner';horizalign,left;y,11
MeterSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(color("#000000")) \
	end; \
	if param.Meter then \
		if param.Meter >= 20 then \
			self:textglowmode('TextGlowMode_Inner'); \
			self:glowshift(); \
		else \
			self:stopeffect(); \
		end; \
	end; \
end;
MeterOffCommand=linear,0.05;zoomy,0
#
ShowDescription=true
DescriptionX=-98
DescriptionOnCommand=shadowlength,0;zoom,0.7;maxwidth,450;uppercase,true;horizalign,left;y,-17
DescriptionSetCommand=%function(self,param) \
	if self:GetText() == "" then \
		self:settext("Edit"); \
	end; \
	if param.CustomDifficulty then \
		self:diffuse(color("#000000")) \
	end; \
end;
DescriptionOffCommand=linear,0.05;zoomy,0
#
ShowAutogen=false
AutogenX=40-32
AutogenY=0
AutogenOnCommand=
AutogenSetCommand=%function(self,param) if param.Difficulty then self:diffuse(CustomDifficultyToLightColor(param.Difficulty)); self:strokecolor(CustomDifficultyToDarkColor(param.Difficulty)); end end
#
ShowStepsType=false
StepsTypeX=-20-32
StepsTypeY=7
StepsTypeOnCommand=zoom,0.45

[StepsDisplayGameplay]
Fallback="StepsDisplay"

ShowTicks=false

#
ShowMeter=true
ZeroMeterString="?"
MeterX=56
MeterY=0
#���q����
MeterOnCommand=shadowlength,1;textglowmode,'TextGlowMode_Inner';visible,false
MeterSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)); \
		self:shadowcolor(CustomDifficultyToDarkColor(param.CustomDifficulty)); \
	end; \
	if param.Meter then \
		if param.Meter >= 100 then \
			self:zoom(0.8); \
		else \
			self:zoom(1); \
		end; \
	end; \
end;
#
ShowDescription=true
DescriptionX=0
DescriptionY=false and -5 or 0
DescriptionOnCommand=shadowlength,1;uppercase,true;zoom,0.75;maxwidth,512+32;horizalign,center
DescriptionOffCommand=
DescriptionSetCommand=%function(self,param) \
	if self:GetText() == "" then \
		self:settext("Edit"); \
	end; \
	if param.CustomDifficulty then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)); \
		self:shadowcolor(CustomDifficultyToDarkColor(param.CustomDifficulty)); \
	end; \
end;
#
ShowAutogen=false
AutogenX=40
AutogenY=0
AutogenOnCommand=
AutogenSetCommand=%function(self,param) if param.Difficulty then self:diffuse(CustomDifficultyToLightColor(param.Difficulty)); self:strokecolor(CustomDifficultyToDarkColor(param.Difficulty)); end end
#
ShowStepsType=false
StepsTypeX=-20
StepsTypeY=7
StepsTypeOnCommand=zoom,0.45


[ScreenOptionsMaster]
Fallback="ScreenOptions"
Class="ScreenOptionsMaster"
NoteSkinSortOrder=""

# ExitItem is an exit row with the "Exit" text as a menu item; ExitTitle
# uses the menu title.
ExitItem="1;together;SelectNone;showoneinrow"
ExitItemDefault=""
ExitItem,1="screen," .. Screen.Metric("NextScreen") .. ";name,ExitItem"

ExitTitle="1;together;SelectNone;showoneinrow"
ExitTitleDefault=""
ExitTitle,1="screen," .. Screen.Metric("NextScreen") .. ";name,ExitTitle"
# player options

SpeedExplanation="Speed"
SpeedIcon=false
Speed="24"
SpeedDefault="mod,1x,no randomspeed"
Speed,1="mod,0.25x;name,x0.25"
Speed,2="mod,0.50x;name,x0.5"
Speed,3="mod,0.75x;name,x0.75"
Speed,4="mod,1x;name,x1"
Speed,5="mod,1.25x;name,x1.25"
Speed,6="mod,1.5x;name,x1.5"
Speed,7="mod,1.75x;name,x1.75"
Speed,8="mod,2x;name,x2"
Speed,9="mod,2.25x;name,x2.25"
Speed,10="mod,2.50x;name,x2.5"
Speed,11="mod,2.75x;name,x2.75"
Speed,12="mod,3x;name,x3"
Speed,13="mod,3.25x;name,x3.25"
Speed,14="mod,3.50x;name,x3.5"
Speed,15="mod,3.75x;name,x3.75"
Speed,16="mod,4x;name,x4"
Speed,17="mod,4.5x;name,x4.5"
Speed,18="mod,5x;name,x5"
Speed,19="mod,5.5x;name,x5.5"
Speed,20="mod,6x;name,x6"
Speed,21="mod,6.5x;name,x6.5"
Speed,22="mod,7x;name,x7"
Speed,23="mod,7.5x;name,x7.5"
Speed,24="mod,8x;name,x8"

AccelExplanation="Accel"
AccelIcon=false
Accel="4"
AccelDefault="mod,no boost,no brake,no wave,no expand,no boomerang"
Accel,1="name,Off"
Accel,2="mod,boost;name,Boost"
Accel,3="mod,brake;name,Brake"
Accel,4="mod,wave;name,Wave"

AppearancePlusExplanation="Appearance"
AppearancePlusIcon=false

TurnExplanation="Turn"
TurnIcon=false
Turn="5"
TurnDefault="mod,no turn"
Turn,1="name,Off"
Turn,2="mod,mirror;name,Mirror"
Turn,3="mod,left;name,Left"
Turn,4="mod,right;name,Right"
Turn,5="mod,shuffle;name,Shuffle"

HideExplanation="Hide"
HideIcon=false
Hide="2"
HideDefault="mod,no dark"
Hide,1="name,Off"
Hide,2="mod,dark;name,On"

ScrollExplanation="Scroll"
ScrollIcon=false
Scroll="2"
ScrollDefault="mod,no reverse,no split,no alternate,no cross"
Scroll,1="name,Standard"
Scroll,2="mod,reverse;name,Reverse"

FreezeExplanation="Freeze"
FreezeIcon=false
Freeze="2"
FreezeDefault="mod,no noholds"
Freeze,1="name,On"
Freeze,2="mod,noholds;name,Off"

JumpExplanation="Jump"
JumpIcon=false
Jump="2"
JumpDefault="mod,no nojumps"
Jump,1="name,On"
Jump,2="mod,nojumps;name,Off"

CutExplanation="Cut"
CutIcon=false
Cut="2"
CutDefault="mod,no little"
Cut,1="name,Off"
Cut,2="mod,little;name,On"

JudgeExplanation=false
JudgeIcon=false
Judge="2"
JudgeDefault="mod,no blind"
Judge,1="mod,blind;name,Off"
Judge,2="name,On"

RiskyExplanation="Risky"
RiskyIcon=false
Risky="3"
RiskyDefault=""
Risky,1="mod,bar;mod,normal-drain;name,Normal"
Risky,2="mod,battery;mod,4 lives;mod,failimmediatecontinue;name,4 Lives"
Risky,3="mod,battery;mod,1 lives;mod,failimmediatecontinue;name,1 Life"

NoteSkinsExplanation=false
NoteSkinsIcon=false

CharactersExplanation=false
CharactersIcon=false

ScreenFilterExplanation="ScreenFilter"
ScreenFilterIcon="ScreenFilter"

ArrowColorExplanation="ArrowColor"
ArrowColorIcon="ArrowColor"

ArrowTypeExplanation="ArrowType"
ArrowTypeIcon="ArrowType"

GaugeExplanation="Gauge"
GaugeIcon="Gauge"

VisualDelaySecondsExplanation="VisualDelay"
VisualDelaySecondsIcon="VisualDelay"

DanceStageExplanation=false
DanceStageIcon=false



ExitExplanation=""

[ScreenPlayerOptions]
ShowFooter=false
ShowHeader=false
ShowHelp=false
ShowStyleIcon=false
WaitForChildrenBeforeTweeningOut=true


TimerSeconds=-1
TimerOnCommand=visible,PREFSMAN:GetPreference("MenuTimer");
TimerOffCommand=linear,0.25;zoom,1.5;diffusealpha,0;

#See 01 Other.lua for details, in short we don't *want* to enable the exit row but
#it is sometimes necessary -tertu
ShowExitRow=false

InputMode="individual"
ForceAllPlayers=false
RepeatRate=12
RepeatDelay=0.25

NumRowsShown=14

RowInitCommand=
RowOnCommand=
RowOffCommand=
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:y((SCREEN_CENTER_Y-160)+(20*offsetFromCenter)) \
end

ContainerOnCommand=visible,false
ContainerOffCommand=sleep,0.2;accelerate,0.5;addx,SCREEN_WIDTH

ExplanationP1X=SCREEN_CENTER_X-280
ExplanationP1Y=SCREEN_CENTER_Y+135
ExplanationP2X=SCREEN_CENTER_X+10
ExplanationP2Y=SCREEN_CENTER_Y+135

LineHighlightP1OnCommand=draworder,-2
LineHighlightP1ChangeCommand=visible,true
LineHighlightP1ChangeToExitCommand=visible,false
LineHighlightP2OnCommand=draworder,-2
LineHighlightP2ChangeCommand=visible,true
LineHighlightP2ChangeToExitCommand=visible,false

ExplanationP1OnCommand=zoom,0.55;wrapwidthpixels,494;horizalign,left;strokecolor,Color("Black")
ExplanationP2OnCommand=zoom,0.55;wrapwidthpixels,494;horizalign,right;strokecolor,Color("Black")

OptionRowNormalMetricsGroup="OptionRowPlayer"
OptionRowExitMetricsGroup="OptionRowExitPlayer"

LineNames=OptionNumber()
LineSpeed="list,Speed"
LineAccel="list,Accel"
LineAppearance="lua,OptionRowAppearancePlus()"
LineTurn="list,Turn"
LineHide="list,Hide"
LineScroll="list,Scroll"
LineNoteSkins=NoteSkinOption()
LineCut="list,Cut"
LineFreeze="list,Freeze"
LineJump="list,Jump"
LineArrowType="lua,OptionRowArrowType()"
LineSelectStage="lua,SelectDanceStage()"
LineCharacters="lua,OptionRowCharacters()"
LineVisual="conf,VisualDelaySeconds"
LineRisky="lua,OptionRowGauge()"

AllowRepeatingChangeValueInput=true
WrapValueInRow=false


[ScreenPlayerOptionsPopup]
Fallback="ScreenPlayerOptions"

[OptionRowExitPlayer]
Fallback="OptionRow"
FrameOnCommand=visible,false
TitleOnCommand=visible,false
ItemOnCommand=visible,false

[ScreenPlayerOptionsR]
Fallback="ScreenPlayerOptions"
Class="ScreenPlayerOptions"
PrevScreen=Branch.BackOutOfPlayerOptions()
NextScreen=Branch.SongOptions()


TimerSeconds=-1
TimerOnCommand=visible,PREFSMAN:GetPreference("MenuTimer");
TimerOffCommand=linear,0.25;zoom,1.5;diffusealpha,0;
ScreenOutDelay=1

ShowHeader=false
TimerStealth=true

LineNames="1,2,3,4,5,6,7,8,9,10"
Line1="list,Speed"
Line2="list,Accel"
Line3="lua,OptionRowAppearancePlus()"
Line4="list,Turn"
Line5="list,Hide"
Line6="list,Scroll"
Line7=NoteSkinOption()
Line8="list,Cut"
Line9="list,Freeze"
Line10="list,Jump"

[ScreenSongOptions]
Fallback="ScreenPlayerOptions"
Class="ScreenSongOptions"
PrevScreen="ScreenPlayerOptions"
NextScreen="ScreenStageInformation"
TimerSeconds=30
PlayMusic=false
StopMusicOnBack=false
InputMode="together"
ForceAllPlayers=true
#
LineNames="5,6,7,8,9,10"
#,11

;Line4="list,Risky"
;"lua,GamePrefDefaultFail()"
Line5="list,Assist"
Line6="list,Rate"
Line7="list,SoundEffect"
Line8="list,AutoAdjust"
Line9="list,Background"
Line10="list,SaveScores"
; Line11="list,LifeType"
; Line12="list,BatLives"

ContainerOnCommand=addy,82

OptionRowNormalMetricsGroup="OptionRowSong"

LineHighlightP1OnCommand=draworder,-2;addx,179
LineHighlightP1ChangeCommand=visible,true
LineHighlightP1ChangeToExitCommand=visible,false
LineHighlightP2OnCommand=draworder,-2;addx,-181
LineHighlightP2ChangeCommand=visible,true
LineHighlightP2ChangeToExitCommand=visible,false

MoreX=SCREEN_CENTER_X
MoreY=SCREEN_CENTER_Y-36
MoreOnCommand=
MoreExitSelectedP1Command=
MoreExitSelectedP2Command=
MoreExitUnselectedP1Command=
MoreExitUnselectedP2Command=

ExplanationP1Y=SCREEN_CENTER_Y+35
ExplanationP1X=SCREEN_CENTER_X
ExplanationP1OnCommand=zoom,0.7;wrapwidthpixels,430;horizalign,left;diffuse,color("#000000");
ExplanationP2Y=SCREEN_CENTER_Y+50
ExplanationP1X=SCREEN_CENTER_X
ExplanationP2OnCommand=zoom,0.7;wrapwidthpixels,430;horizalign,left;diffuse,color("#000000");
ExplanationTogetherY=SCREEN_CENTER_Y+35
ExplanationTogetherX=SCREEN_CENTER_X
ExplanationTogetherOnCommand=zoom,0.8;wrapwidthpixels,430;horizalign,center;diffuse,color("#000000");


[OptionRowPlayer]
Fallback="OptionRow"
ShowUnderlines=false

TitleX=SCREEN_CENTER_X
TitleY=
TitleOnCommand=zoomy,0.8;zoomx,0.9
TitleGainFocusCommand=diffuse,color("1,1,1,1");
TitleLoseFocusCommand=stopeffect;diffuse,color("#013c14");strokecolor,color("0,0.8,0,1")

FrameX=SCREEN_CENTER_X
FrameY=
FrameGainFocusCommand=diffuse,color("1,1,1,1");
FrameLoseFocusCommand=stopeffect;diffuse,color("0.375,0.5,0,1")

ItemsStartX=SCREEN_CENTER_X
ItemsEndX=SCREEN_CENTER_X

ItemsGapX=14
ItemsMinBaseZoom=0.6
ItemOnCommand=uppercase,true;draworder,100;zoom,0.8;maxwidth,236
ItemGainFocusCommand=
ItemLoseFocusCommand=

ItemsLongRowP1X=SCREEN_CENTER_X-200
ItemsLongRowP2X=SCREEN_CENTER_X+200
ItemsLongRowSharedX=SCREEN_CENTER_X-200
TweenSeconds=0.05
ColorSelected=color("#0cff00")
ColorNotSelected=color("0.34,0.34,0.34,1")
ColorDisabled=color("0.34,0.34,0.34,1")

[ScreenStageInformation]
TimerSeconds=1
TimerOnCommand=visible,false

[ScreenGameplay]
CodeNames="SpeedUp,SpeedDown,AppearancePlusHarsher,AppearancePlusEasier,AppearancePlusShow"
CodeSpeedUp="MenuRight"
CodeSpeedDown="MenuLeft"
CodeAppearancePlusHarsher="MenuDown"
CodeAppearancePlusEasier="MenuUp"
CodeAppearancePlusShow="Start"
#
StartGivesUp=false
BackGivesUp=false
#
AllowCenter1Player=true
#
ShowLifeMeterForDisabledPlayers=false
# DDR XX SYSTEM
InTransitionSeconds=BeginReadyDelay()
OutTransitionSeconds=4
CancelTransitionSeconds=0.2
NextCourseSongDelay=5
StopCourseEarly=false
MinSecondsToStep=MinSecondsToStep()
MinSecondsToStepNextSong=MinSecondsToStep()
MinSecondsToMusic=GetSongStartDelay()
OutTransitionLength=5
MusicFadeOutSeconds=0.5
BeginFailedDelay=3.0
#
#StreamDisplay
LifeP1X=THEME:GetMetric(Var "LoadingScreen","PlayerP1OnePlayerOneSideX")+0.6
LifeP1Y=SCREEN_TOP+24
LifeP1OnCommand=zoom,1;draworder,2
LifeP1OffCommand=
#
LifeP2X=THEME:GetMetric(Var "LoadingScreen","PlayerP2OnePlayerOneSideX")-0.6
LifeP2Y=SCREEN_TOP+24
LifeP2OnCommand=zoomx,-1;draworder,2
LifeP2OffCommand=
#
CombinedLifeX=SCREEN_CENTER_X
CombinedLifeY=SCREEN_TOP+24
CombinedLifeOnCommand=finishtweening;diffuseleftedge,PlayerColor(PLAYER_1);diffuserightedge,PlayerColor(PLAYER_2);addy,-48;sleep,1.25;bounceend,0.35;addy,48;
CombinedLifeOffCommand=
#
ShowStageDisplay=false
ShowBPMDisplay=false
ShowScoreFrame=false
ShowStageFrame=false
ShowScore=false
ScoreP1OnCommand=visible,false
ScoreP2OnCommand=visible,false
#
PlayerOptionsP1X=SCREEN_CENTER_X
PlayerOptionsP1Y=SCREEN_CENTER_Y+9924
PlayerOptionsP1OnCommand=draworder,101;vertalign,top;wrapwidthpixels,256*2;zoom,1.0;diffusealpha,0;addy,10;smooth,0.3;diffusealpha,1;addy,-10;sleep,3;smooth,0.5;addy,10;diffusealpha,1
PlayerOptionsP1OffCommand=
#
PlayerOptionsP2X=Center1Player() and SCREEN_CENTER_X or THEME:GetMetric(Var "LoadingScreen","PlayerP2OnePlayerOneSideX")
PlayerOptionsP2Y=SCREEN_CENTER_Y+9924
PlayerOptionsP2OnCommand=draworder,101;vertalign,top;wrapwidthpixels,256*2;zoom,0.5;diffusealpha,0;addy,10;smooth,0.3;diffusealpha,1;addy,-10;sleep,3;smooth,0.5;addy,10;diffusealpha,0
PlayerOptionsP2OffCommand=
#
SongOptionsX=Center1Player() and (GAMESTATE:GetMasterPlayerNumber() == PLAYER_1 and THEME:GetMetric(Var "LoadingScreen","PlayerP1OnePlayerOneSideX") or THEME:GetMetric(Var "LoadingScreen","PlayerP2OnePlayerOneSideX")) or SCREEN_CENTER_X
SongOptionsY=SCREEN_BOTTOM-9932
SongOptionsOnCommand=draworder,101;zoom,0.5
SongOptionsOffCommand=
#
LyricDisplaySetNoReverseCommand=x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y+160
LyricDisplaySetReverseCommand=x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y+160
# This is used if one player is in reverse and the other isn't.
LyricDisplaySetOneReverseCommand=x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y;
LyricDisplayDefaultColor=Color("White")
#
OniGameOverP1X=
OniGameOverP1Y=
OniGameOverP1OnCommand=
OniGameOverP1OffCommand=
#
OniGameOverP2X=
OniGameOverP2Y=
OniGameOverP2OnCommand=
OniGameOverP2OffCommand=
#
SurviveTimeX=SCREEN_CENTER_X
SurviveTimeY=SCREEN_CENTER_Y+40
SurviveTimeOnCommand=shadowlength,1;zoomx,0;bounceend,1;zoomx,1
SurviveTimeOffCommand=shadowlength,1;linear,1;zoom,0.75;diffusealpha,0
#
ActiveAttackListP1X=THEME:GetMetric(Var "LoadingScreen","PlayerP1OnePlayerOneSideX")
ActiveAttackListP1Y=
ActiveAttackListP1OnCommand=visible,false
ActiveAttackListP1OffCommand=
ActiveAttackListP2X=THEME:GetMetric(Var "LoadingScreen","PlayerP1OnePlayerOneSideX")
ActiveAttackListP2Y=
ActiveAttackListP2OnCommand=visible,false
ActiveAttackListP2OffCommand=
#
#
PlayerP1OnCommand=
PlayerP1OffCommand=
PlayerP2OnCommand=
PlayerP2OffCommand=

PlayerP1OnePlayerOneSideX=ScreenGameplay_P1X()
PlayerP2OnePlayerOneSideX=ScreenGameplay_P2X()
PlayerP1TwoPlayersTwoSidesX=ScreenGameplay_P1X()
PlayerP2TwoPlayersTwoSidesX=ScreenGameplay_P2X()
PlayerP1TwoPlayersOneSideX=ScreenGameplay_P1X()
PlayerP2TwoPlayersOneSideX=ScreenGameplay_P2X()

PlayerP1OnePlayerTwoSidesX=SCREEN_CENTER_X
PlayerP2OnePlayerTwoSidesX=SCREEN_CENTER_X
PlayerP1TwoPlayersSharedSidesX=SCREEN_CENTER_X
PlayerP2TwoPlayersSharedSidesX=SCREEN_CENTER_X

[ScreenEvaluation]
Class="ScreenEvaluation"
Fallback="ScreenWithMenuElements"
ShowHeader=true
TimerSeconds=20
TimerOnCommand=draworder,99;x,SCREEN_CENTER_X+209;y,SCREEN_TOP+21;visible,PREFSMAN:GetPreference("MenuTimer");
TimerOffCommand=linear,0.25;zoom,0.9;diffusealpha,0;
#
StageDisplayNumberOffset=0
#
NextScreen=Branche.AfterEvaluation()
PrevScreen=Branche.AfterEvaluation()
#
PlayMusic=true
#
PrepareScreens="ScreenProfileSave,ScreenSelectMusic"
PersistScreens="ScreenEvaluation,ScreenProfileSave,ScreenSelectMusic"
#
ShowJudgmentLineW1=false
ShowJudgmentLineW2=false
ShowJudgmentLineW3=false
ShowJudgmentLineW4=false
ShowJudgmentLineW5=false
ShowJudgmentLineHeld=false
ShowJudgmentLineMiss=false
ShowJudgmentLineMaxCombo=false
ShowGradeArea=false
ShowScoreArea=false
ShowPointsArea=false
ShowSharedJudgmentLineLabels=false
ShowGraphDisplay=false
ShowComboGraph=false
ShowStepsDisplay=false
ShowPeakComboAward=false
ShowBonusArea=false

GradeP1X=SCREEN_CENTER_X-380
GradeP1Y=SCREEN_CENTER_Y-170
GradeP1OnCommand=draworder,99;sleep,0.2;linear,0.2;glowshift;effectperiod,.75;effectcolor1,color("1,1,1,0");effectcolor2,color("1,1,1,.2")
GradeP1OffCommand=linear,0.2;zoom,0
GradeP2X=SCREEN_CENTER_X+300
GradeP2Y=SCREEN_CENTER_Y-170
GradeP2OnCommand=draworder,99;sleep,0.2;linear,0.2;glowshift;effectperiod,.75;effectcolor1,color("1,1,1,0");effectcolor2,color("1,1,1,.2")
GradeP2OffCommand=linear,0.2;zoom,0

RingP1X=SCREEN_CENTER_X-296
RingP1Y=SCREEN_CENTER_Y-164
RingP2X=SCREEN_CENTER_X+296
RingP2Y=SCREEN_CENTER_Y-164

MachineRecordP1X=
MachineRecordP1Y=
MachineRecordP1OnCommand=
MachineRecordP1OffCommand=
#
MachineRecordP2X=
MachineRecordP2Y=
MachineRecordP2OnCommand=
MachineRecordP2OffCommand=
#
PersonalRecordP1X=
PersonalRecordP1Y=
PersonalRecordP1OnCommand=
PersonalRecordP1OffCommand=
#
PersonalRecordP2X=
PersonalRecordP2Y=
PersonalRecordP2OnCommand=
PersonalRecordP2OffCommand=
#

CodeNames="Left,Right"
CodeLeft="MenuLeft"
CodeRight="MenuRight"

ShowStageDisplay=true
StageDisplayX=SCREEN_CENTER_X-120
StageDisplayY=SCREEN_TOP+13
StageDisplayOnCommand=draworder,105;zoomx,0.6;zoomy,0.75;horizalign,right
StageDisplayOffCommand=linear,0.05;zoomy,0;

[ScreenEvaluationSummary]
Fallback="ScreenEvaluation"
#
NextScreen=Branch.AfterSummary
#
TimerSeconds=30
TimerOnCommand=draworder,999;x,SCREEN_CENTER_X+209;y,SCREEN_TOP+21;visible,PREFSMAN:GetPreference("MenuTimer");
TimerOffCommand=linear,0.25;zoom,0.9;diffusealpha,0;
PlayMusic=true
#
Summary=true
ShowTimer=true
TimerStealth=false
#
ShowStageDisplay=false
ShowJudgmentLineW1=false
ShowJudgmentLineW2=false
ShowJudgmentLineW3=false
ShowJudgmentLineW4=false
ShowJudgmentLineW5=false
ShowJudgmentLineHeld=false
ShowJudgmentLineMiss=false
ShowJudgmentLineMaxCombo=false
ShowBonusArea=false
#
#
ScoreNumberP1X=SCREEN_CENTER_X-220
ScoreNumberP1Y=SCREEN_TOP-420
ScoreNumberP1OnCommand=diffuse,Color("Yellow");strokecolor,ColorDarkTone(Color("Yellow"));zoom,0.28;addy,-500;sleep,0.3;linear,0.0001;addy,-500
ScoreNumberP1OffCommand=linear,0.0001;addy,-500
ScoreNumberP2X=SCREEN_CENTER_X+220
ScoreNumberP2Y=SCREEN_TOP-420
ScoreNumberP2OnCommand=diffuse,Color("Yellow");strokecolor,ColorDarkTone(Color("Yellow"));zoom,0.28;addy,-500;sleep,0.3;linear,0.0001;addy,-500
ScoreNumberP2OffCommand=linear,0.0001;addy,-500
#
SmallBanner1X=SCREEN_CENTER_X-80
SmallBanner1Y=SCREEN_CENTER_Y+150
SmallBanner1OnCommand=%function(self) \
	if STATSMAN:GetStagesPlayed() == 1 then \
		self:y(SCREEN_CENTER_Y); \
	elseif STATSMAN:GetStagesPlayed() == 2 then \
		self:y(SCREEN_CENTER_Y+30); \
	elseif STATSMAN:GetStagesPlayed() == 3 then \
		self:y(SCREEN_CENTER_Y+60); \
	elseif STATSMAN:GetStagesPlayed() == 4 then \
		if not GAMESTATE:IsExtraStage() and not GAMESTATE:IsExtraStage2() then\
			self:y(SCREEN_CENTER_Y+60); \
		else \
			self:y(SCREEN_CENTER_Y+90); \
		end; \
	elseif STATSMAN:GetStagesPlayed() == 5 then \
		if not GAMESTATE:IsExtraStage() and not GAMESTATE:IsExtraStage2() then\
			self:y(SCREEN_CENTER_Y+60); \
		elseif GAMESTATE:IsExtraStage()  then \
			self:y(SCREEN_CENTER_Y+90); \
		elseif GAMESTATE:IsExtraStage2()  then \
			self:y(SCREEN_CENTER_Y+120); \
		end; \
	elseif STATSMAN:GetStagesPlayed() >= 6 then \
		if not GAMESTATE:IsExtraStage() and not GAMESTATE:IsExtraStage2() then\
			self:y(SCREEN_CENTER_Y+60); \
		elseif GAMESTATE:IsExtraStage()  then \
			self:y(SCREEN_CENTER_Y+90); \
		elseif GAMESTATE:IsExtraStage2()  then \
			self:y(SCREEN_CENTER_Y+120); \
		end; \
	end; \
	(cmd(scaletoclipped,160,50;visible,false;ztest,1;zoomx,0.30;zoomy,0;diffusealpha,0.8;sleep,0.333;decelerate,0.133;zoomy,1;diffusealpha,1;accelerate,0.033;zoomx,0.33;decelerate,0.033;zoomx,0.30))(self); \
end
SmallBanner1OffCommand=linear,0.2;zoom,0;

SmallBanner2X=SCREEN_CENTER_X-80
SmallBanner2Y=SCREEN_CENTER_Y+100
SmallBanner2OnCommand=%function(self) \
	if STATSMAN:GetStagesPlayed() == 2 then \
		self:y(SCREEN_CENTER_Y-30); \
	elseif STATSMAN:GetStagesPlayed() == 3 then \
		self:y(SCREEN_CENTER_Y+0); \
	elseif STATSMAN:GetStagesPlayed() == 4 then \
		if not GAMESTATE:IsExtraStage() and not GAMESTATE:IsExtraStage2() then\
			self:y(SCREEN_CENTER_Y+0); \
		else \
			self:y(SCREEN_CENTER_Y+30); \
		end; \
	elseif STATSMAN:GetStagesPlayed() == 5 then \
		if not GAMESTATE:IsExtraStage() and not GAMESTATE:IsExtraStage2() then\
			self:y(SCREEN_CENTER_Y+0); \
		elseif GAMESTATE:IsExtraStage()  then \
			self:y(SCREEN_CENTER_Y+30); \
		elseif GAMESTATE:IsExtraStage2()  then \
			self:y(SCREEN_CENTER_Y+60); \
		end; \
	elseif STATSMAN:GetStagesPlayed() >= 6 then \
		if not GAMESTATE:IsExtraStage() and not GAMESTATE:IsExtraStage2() then\
			self:y(SCREEN_CENTER_Y+0); \
		elseif GAMESTATE:IsExtraStage()  then \
			self:y(SCREEN_CENTER_Y+30); \
		elseif GAMESTATE:IsExtraStage2()  then \
			self:y(SCREEN_CENTER_Y+60); \
		end; \
	end; \
	(cmd(scaletoclipped,160,50;visible,false;ztest,1;zoomx,0.30;zoomy,0;diffusealpha,0.8;sleep,0.333;decelerate,0.133;zoomy,1;diffusealpha,1;accelerate,0.033;zoomx,0.33;decelerate,0.033;zoomx,0.30))(self); \
end
SmallBanner2OffCommand=linear,0.2;zoom,0;

SmallBanner3X=SCREEN_CENTER_X-80
SmallBanner3Y=SCREEN_CENTER_Y+50
SmallBanner3OnCommand=%function(self) \
	if STATSMAN:GetStagesPlayed() == 3 then \
		self:y(SCREEN_CENTER_Y-60); \
	elseif STATSMAN:GetStagesPlayed() == 4 then \
		if not GAMESTATE:IsExtraStage() and not GAMESTATE:IsExtraStage2() then\
			self:y(SCREEN_CENTER_Y-60); \
		else \
			self:y(SCREEN_CENTER_Y-30); \
		end; \
	elseif STATSMAN:GetStagesPlayed() == 5 then \
		if not GAMESTATE:IsExtraStage() and not GAMESTATE:IsExtraStage2() then\
			self:y(SCREEN_CENTER_Y-60); \
		elseif GAMESTATE:IsExtraStage()  then \
			self:y(SCREEN_CENTER_Y-30); \
		elseif GAMESTATE:IsExtraStage2()  then \
			self:y(SCREEN_CENTER_Y+0); \
		end; \
	elseif STATSMAN:GetStagesPlayed() >= 6 then \
		if not GAMESTATE:IsExtraStage() and not GAMESTATE:IsExtraStage2() then\
			self:y(SCREEN_CENTER_Y-60); \
		elseif GAMESTATE:IsExtraStage()  then \
			self:y(SCREEN_CENTER_Y-30); \
		elseif GAMESTATE:IsExtraStage2()  then \
			self:y(SCREEN_CENTER_Y+0); \
		end; \
	end; \
	(cmd(scaletoclipped,160,50;visible,false;ztest,1;zoomx,0.30;zoomy,0;diffusealpha,0.8;sleep,0.333;decelerate,0.133;zoomy,1;diffusealpha,1;accelerate,0.033;zoomx,0.33;decelerate,0.033;zoomx,0.30))(self); \
end
SmallBanner3OffCommand=linear,0.2;zoom,0;

SmallBanner4X=SCREEN_CENTER_X-80
SmallBanner4Y=SCREEN_CENTER_Y-50
SmallBanner4OnCommand=%function(self) \
	if  STATSMAN:GetStagesPlayed() == 4 then \
		if not GAMESTATE:IsExtraStage() and not GAMESTATE:IsExtraStage2() then\
			self:y(SCREEN_CENTER_Y-120); \
		else \
			self:y(SCREEN_CENTER_Y-90); \
		end; \
	elseif STATSMAN:GetStagesPlayed() == 5 then \
		if not GAMESTATE:IsExtraStage() and not GAMESTATE:IsExtraStage2() then\
			self:y(SCREEN_CENTER_Y-120); \
		elseif GAMESTATE:IsExtraStage()  then \
			self:y(SCREEN_CENTER_Y-90); \
		elseif GAMESTATE:IsExtraStage2()  then \
			self:y(SCREEN_CENTER_Y-60); \
		end; \
	elseif STATSMAN:GetStagesPlayed() >= 6 then \
		if not GAMESTATE:IsExtraStage() and not GAMESTATE:IsExtraStage2() then\
			self:y(SCREEN_CENTER_Y-120); \
		elseif GAMESTATE:IsExtraStage()  then \
			self:y(SCREEN_CENTER_Y-90); \
		elseif GAMESTATE:IsExtraStage2()  then \
			self:y(SCREEN_CENTER_Y-60); \
		end; \
	end; \
	(cmd(scaletoclipped,160,50;visible,false;ztest,1;zoomx,0.30;zoomy,0;diffusealpha,0.8;sleep,0.333;decelerate,0.133;zoomy,1;diffusealpha,1;accelerate,0.033;zoomx,0.33;decelerate,0.033;zoomx,0.30))(self); \
end
SmallBanner4OffCommand=linear,0.2;zoom,0;

SmallBanner5X=SCREEN_CENTER_X-80
SmallBanner5Y=SCREEN_CENTER_Y-100
SmallBanner5OnCommand=%function(self) \
	if STATSMAN:GetStagesPlayed() == 5 then \
		if not GAMESTATE:IsExtraStage() and not GAMESTATE:IsExtraStage2() then\
			self:y(SCREEN_CENTER_Y-180); \
		elseif GAMESTATE:IsExtraStage()  then \
			self:y(SCREEN_CENTER_Y-150); \
		elseif GAMESTATE:IsExtraStage2()  then \
			self:y(SCREEN_CENTER_Y-120); \
		end; \
	elseif STATSMAN:GetStagesPlayed() >= 6 then \
		if not GAMESTATE:IsExtraStage() and not GAMESTATE:IsExtraStage2() then\
			self:y(SCREEN_CENTER_Y-180); \
		elseif GAMESTATE:IsExtraStage()  then \
			self:y(SCREEN_CENTER_Y-150); \
		elseif GAMESTATE:IsExtraStage2()  then \
			self:y(SCREEN_CENTER_Y-120); \
		end; \
	end; \
	(cmd(scaletoclipped,160,50;visible,false;ztest,1;zoomx,0.30;zoomy,0;diffusealpha,0.8;sleep,0.333;decelerate,0.133;zoomy,1;diffusealpha,1;accelerate,0.033;zoomx,0.33;decelerate,0.033;zoomx,0.30))(self); \
end
SmallBanner5OfCommand=linear,0.2;zoom,0;

SmallBanner6X=SCREEN_CENTER_X-80
SmallBanner6Y=SCREEN_CENTER_Y-150
SmallBanner6OnCommand=%function(self) \
	if STATSMAN:GetStagesPlayed() >= 6 then \
		if not GAMESTATE:IsExtraStage() and not GAMESTATE:IsExtraStage2() then\
			self:y(SCREEN_CENTER_Y-240); \
		elseif GAMESTATE:IsExtraStage()  then \
			self:y(SCREEN_CENTER_Y-210); \
		elseif GAMESTATE:IsExtraStage2()  then \
			self:y(SCREEN_CENTER_Y-180); \
		end; \
	end; \
	(cmd(scaletoclipped,160,50;visible,false;ztest,1;zoomx,0.30;zoomy,0;diffusealpha,0.8;sleep,0.333;decelerate,0.133;zoomy,1;diffusealpha,1;accelerate,0.033;zoomx,0.33;decelerate,0.033;zoomx,0.30))(self); \
end
SmallBanner6OffCommand=linear,0.2;zoom,0;

[ScreenDataSaveSummary]
Fallback="ScreenSplash"
TimerSeconds=20
TimerOnCommand=draworder,999;x,SCREEN_CENTER_X+209;y,SCREEN_TOP+21;visible,PREFSMAN:GetPreference("MenuTimer");
TimerOffCommand=linear,0.25;zoom,0.9;diffusealpha,0;
ShowHeader=true
ShowFooter=false
AllowStartToSkip=true
NextScreen=Branch.AfterDataSaveSummary()
PrevScreen=Branch.AfterDataSaveSummary()
StartScreen=Branch.AfterDataSaveSummary()

[ScreenDataSaveSummaryEnd]
Class="ScreenProfileSave"
Fallback="ScreenProfileSave"
NextScreen="ScreenGameOver"
PrevScreen="ScreenGameOver"
TimerSeconds=-1

[ScreenGameOver]
TimerSeconds=7
##NextScreen=Branch.TitleMenu()
NextScreen="ScreenWarning"

[ScreenTitleJoin]
PrevScreen="ScreenWarning"
ShowHelp=false
HelpText=Screen.String("HelpTextTitleJoin")
HelpY=SCREEN_CENTER_Y+100
HelpOnCommand=visible,false;zoom,1;strokecolor,color("0.125,0.125,0.125,0.5");queuecommand,"Refresh"
HelpCoinIsertedMessageCommand=playcommand,"Refresh"
HelpCoinModeChangedMessageCommand=playcommand,"Refresh"
HelpRefreshCommand=%function(self) \
	local bCanPlay = GAMESTATE:EnoughCreditsToJoin(); \
	local bReady = GAMESTATE:GetNumSidesJoined() > 0; \
	if bCanPlay or bReady then \
		self:SetTipsColonSeperated(THEME:GetString( Var "LoadingScreen","HelpTextPlay")); \
	else \
		self:SetTipsColonSeperated(THEME:GetString( Var "LoadingScreen","HelpTextWait")); \
	end \
end;
#
LogoX=SCREEN_CENTER_X
LogoY=SCREEN_CENTER_Y-28
LogoOnCommand=bob;effectperiod,4;effectmagnitude,0,5.25,0;zoom,0;bounceend,0.35;zoom,0.75
LogoOffCommand=stopeffect;bouncebegin,0.35;rotationz,360;zoom,0

VersionInfoX=SCREEN_CENTER_X+114
VersionInfoY=SCREEN_CENTER_Y+44
VersionInfoOnCommand=horizalign,right;vertalign,bottom;bob;effectperiod,4;effectmagnitude,0,5.25,0;zoom,0;bounceend,0.35;zoom,0.65;shadowlength,1;shadowcolor,color("0.2,0.2,0.2,0.925");
ScrollerOnCommand=visible,false;
ArcadeOverlay.TextY=SCREEN_BOTTOM-128

[ScreenCredits]
TimerSeconds=96
TimerMetricsGroup="MenuTimerNoSound"

[ScreenNameEntryTraditional]
Class="ScreenNameEntryTraditional"
Fallback="ScreenWithMenuElements"
NextScreen="ScreenGameOver"
CancelTransitionsOut=true
TimerSeconds=30
ForceTimer=true
ForceTimerWait=true
RepeatRate=15
RepeatDelay=1/4
HelpText="Enter your name!"
#
MaxRankingNameLength=4
CodeNames="Backspace,Left,Right,NextRow1=NextRow,NextRow2=NextRow,PrevRow,JumpToEnter,Enter"
CodeLeft="+MenuLeft"
CodeRight="+MenuRight"
CodePrevRow="+MenuUp"
CodeNextRow1="+MenuDown"
CodeNextRow2="Select,~Select"
CodeBackspace="@Select-MenuLeft"
CodeJumpToEnter="@Select-Start"
CodeEnter="Start"

[StepsDisplayEdit]
Fallback="StepsDisplayGameplay"

[EditMenu]
EditMode="EditMode_Full"
ShowGroups=true

Arrows1X=SCREEN_CENTER_X-140
Arrows2X=SCREEN_CENTER_X+140
ArrowsEnabledCommand=diffuse,color("1,1,1,1");shadowlengthy,1;shadowcolor,color("#002740");
ArrowsDisabledCommand=diffuse,color("0.45,0.45,0.45,1");shadowlengthy,1;shadowcolor,color("#002740");

GroupBannerX=SCREEN_CENTER_X+250
GroupBannerY=SCREEN_CENTER_Y-140
GroupBannerOnCommand=scaletoclipped,128,40

SongBannerX=SCREEN_CENTER_X+250
SongBannerY=SCREEN_CENTER_Y-90
SongBannerOnCommand=scaletoclipped,128,40

TextBannerType="TextBannerEditMode"
SongTextBannerX=SCREEN_CENTER_X
SongTextBannerY=SCREEN_CENTER_Y-90

StepsDisplayX=SCREEN_CENTER_X+240
StepsDisplayY=SCREEN_CENTER_Y-0
StepsDisplaySourceX=SCREEN_CENTER_X+240
StepsDisplaySourceY=SCREEN_CENTER_Y+80

Row1Y=SCREEN_CENTER_Y-140
Row2Y=SCREEN_CENTER_Y-90
Row3Y=SCREEN_CENTER_Y-40
Row4Y=SCREEN_CENTER_Y-0
Row5Y=SCREEN_CENTER_Y+40
Row6Y=SCREEN_CENTER_Y+80
Row7Y=SCREEN_CENTER_Y+130

Label1X=SCREEN_CENTER_X-250
Label1Y=THEME:GetMetric("EditMenu","Row1Y")
Label1OnCommand=shadowlength,1;zoom,0.75
Label1OffCommand=
Label2X=SCREEN_CENTER_X-250
Label2Y=THEME:GetMetric("EditMenu","Row2Y")
Label2OnCommand=shadowlength,1;zoom,0.75
Label2OffCommand=
Label3X=SCREEN_CENTER_X-250
Label3Y=THEME:GetMetric("EditMenu","Row3Y")
Label3OnCommand=shadowlength,1;zoom,0.75
Label3OffCommand=
Label4X=SCREEN_CENTER_X-250
Label4Y=THEME:GetMetric("EditMenu","Row4Y")
Label4OnCommand=shadowlength,1;zoom,0.75
Label4OffCommand=
Label5X=SCREEN_CENTER_X-250
Label5Y=THEME:GetMetric("EditMenu","Row5Y")
Label5OnCommand=shadowlength,1;zoom,0.75
Label5OffCommand=
Label6X=SCREEN_CENTER_X-250
Label6Y=THEME:GetMetric("EditMenu","Row6Y")
Label6OnCommand=shadowlength,1;zoom,0.75
Label6OffCommand=
Label7X=SCREEN_CENTER_X-250
Label7Y=THEME:GetMetric("EditMenu","Row7Y")
Label7OnCommand=shadowlength,1;zoom,0.75
Label7OffCommand=

Value1X=SCREEN_CENTER_X
Value1Y=THEME:GetMetric("EditMenu","Row1Y")
Value1OnCommand=shadowlength,1;zoom,0.75;maxwidth,SCREEN_CENTER_X*0.65
Value1OffCommand=
Value2X=SCREEN_CENTER_X
Value2Y=THEME:GetMetric("EditMenu","Row2Y")
Value2OnCommand=shadowlength,1;zoom,0.75;maxwidth,SCREEN_CENTER_X*0.65
Value2OffCommand=
Value3X=SCREEN_CENTER_X
Value3Y=THEME:GetMetric("EditMenu","Row3Y")
Value3OnCommand=shadowlength,1;zoom,0.75;maxwidth,SCREEN_CENTER_X*0.65
Value3OffCommand=
Value4X=SCREEN_CENTER_X
Value4Y=THEME:GetMetric("EditMenu","Row4Y")
Value4OnCommand=shadowlength,1;zoom,0.75;maxwidth,SCREEN_CENTER_X*0.65
Value4OffCommand=
Value5X=SCREEN_CENTER_X
Value5Y=THEME:GetMetric("EditMenu","Row5Y")
Value5OnCommand=shadowlength,1;zoom,0.75;maxwidth,SCREEN_CENTER_X*0.65
Value5OffCommand=
Value6X=SCREEN_CENTER_X
Value6Y=THEME:GetMetric("EditMenu","Row6Y")
Value6OnCommand=shadowlength,1;zoom,0.75;maxwidth,SCREEN_CENTER_X*0.65
Value6OffCommand=
Value7X=SCREEN_CENTER_X
Value7Y=THEME:GetMetric("EditMenu","Row7Y")
Value7OnCommand=shadowlength,1;zoom,0.75;maxwidth,SCREEN_CENTER_X*0.65
Value7OffCommand=

[ScreenEditMenu]
Fallback="ScreenWithMenuElements"
Class="ScreenEditMenu"
ShowHeader=true
ShowFooter=false
NextScreen="ScreenEdit"
PrevScreen=Branch.TitleMenu()
TimerSeconds=-1
ShowStyleIcon=false
#
EditMenuType="EditMenu"
ExplanationX=SCREEN_CENTER_X
ExplanationY=SCREEN_BOTTOM-60
ExplanationOnCommand=stoptweening;zoom,0.5;shadowlength,0;wrapwidthpixels,500/0.7;cropright,1;linear,0.5;cropright,0
ExplanationOffCommand=stoptweening

# could use a redo but whatever

[ScreenEdit]
EditHelpX=SCREEN_LEFT+4
EditHelpY=SCREEN_TOP+4
EditHelpOnCommand=halign,0;valign,0;zoom,0.54;shadowlength,1;maxheight,(SCREEN_HEIGHT-32)*2
InfoX=SCREEN_RIGHT-128
InfoY=SCREEN_TOP+4
InfoOnCommand=halign,0;valign,0;zoom,0.54;shadowlength,1;maxheight,(SCREEN_HEIGHT-32)*2
PlayRecordHelpX=SCREEN_LEFT+20
PlayRecordHelpY=SCREEN_BOTTOM-20
PlayRecordHelpOnCommand=diffusealpha,0

[ScreenMiniMenuMainMenu]
Fallback="ScreenMiniMenu"
ShowHeader=false
ShowFooter=false
TitleX=SCREEN_CENTER_X-80

[ScreenMiniMenuAreaMenu]
Fallback="ScreenMiniMenu"
ShowHeader=false
ShowFooter=false

[ScreenMiniMenuAlterMenu]
Fallback="ScreenMiniMenu"
ShowHeader=false
ShowFooter=false

[ScreenMiniMenuStepsInformation]
Fallback="ScreenMiniMenu"
ShowHeader=false
ShowFooter=false

[ScreenMiniMenuStepsData]
Fallback="ScreenMiniMenu"
ShowHeader=false
ShowFooter=false

[ScreenMiniMenuSongInformation]
Fallback="ScreenMiniMenu"
ShowHeader=false
ShowFooter=false

[ScreenMiniMenuTimingDataInformation]
Fallback="ScreenMiniMenu"
ShowHeader=false
ShowFooter=false

[ScreenMiniMenuTimingDataChangeInformation]
Fallback="ScreenMiniMenu"
ShowHeader=false
ShowFooter=false

[ScreenMiniMenuBackgroundChange]
Fallback="ScreenMiniMenu"
ShowHeader=false
ShowFooter=false

[ScreenMiniMenuPreferences]
Fallback="ScreenMiniMenu"
ShowHeader=false
ShowFooter=false

[ScreenMiniMenuInsertTapAttack]
Fallback="ScreenMiniMenu"
ShowHeader=false
ShowFooter=false

[ScreenOptionsServiceChild]
Fallback="ScreenOptionsMaster"
ShowFooter=false
ShowHeader=false
PrevScreen="ScreenOptionsService"
NextScreen="ScreenOptionsService"
TimerSeconds=-1
TimerOnCommand=visible,false
AllowOperatorMenuButton=false
#
ForceAllPlayers=true
LightsMode="LightsMode_MenuStartAndDirections"
NavigationMode="normal"
InputMode="together"
#
ShowStyleIcon=false
HelpText=Screen.String("HelpTextOptionsAndBack")
#
ShowExitRow=true
SeparateExitRow=false
#
LineHighlightP1OnCommand=visible,false
LineHighlightP1ChangeCommand=
LineHighlightP1ChangeToExitCommand=
#
LineHighlightP2OnCommand=visible,false
LineHighlightP2ChangeCommand=
LineHighlightP2ChangeToExitCommand=
#
ExplanationTogetherX=SCREEN_CENTER_X
ExplanationTogetherY=SCREEN_CENTER_Y+180
ExplanationTogetherOnCommand=stoptweening;zoom,0.5;shadowlength,0;wrapwidthpixels,500/0.7;cropright,1;linear,0.5;cropright,0
ExplanationTogetherOffCommand=stoptweening

[ScreenOptionsSimple]
Fallback="ScreenOptionsMaster"
NavigationMode="menu"
InputMode="together"
ForceAllPlayers=true

NumRowsShown=10
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) self:y(SCREEN_CENTER_Y-154+28*offsetFromCenter) end
ShowExitRow=true
SeparateExitRow=false

ExplanationTogetherX=SCREEN_CENTER_X
ExplanationTogetherY=SCREEN_CENTER_Y+174
ExplanationTogetherOnCommand=stoptweening;zoom,0.75;shadowlength,0;wrapwidthpixels,600/0.75;cropright,1;linear,0.5;cropright,0
ExplanationTogetherOffCommand=stoptweening

[ScreenOptionsService]
ShowHeader=false
ShowFooter=false
NextScreen="ScreenClear"
PrevScreen="ScreenClear"
LineNames="Sync,Reload,KeyConfig,Input,Arcade,Custom,Appearance,GraphicSound,Profiles,UI,Advanced"

LineSync="gamecommand;screen,ScreenGameplaySyncMachine;name,Calibrate Machine Sync"
LineReload="gamecommand;screen,ScreenReloadSongs;name,Reload Songs"
LineKeyConfig="gamecommand;screen,ScreenMapControllers;name,Key Joy Mappings"
LineInput="gamecommand;screen,ScreenOptionsInput;name,Input Options"
LineArcade="gamecommand;screen,ScreenOptionsArcade;name,Arcade Options"
LineCustom="gamecommand;screen,ScreenCustomOptions;name,CustomOptions"
LineAppearance="gamecommand;screen,ScreenAppearanceOptions;name,Appearance Options"
LineGraphicSound="gamecommand;screen,ScreenOptionsGraphicsSound;name,Graphics/Sound Options"
LineProfiles="gamecommand;screen,ScreenOptionsManageProfiles;name,Profiles"
LineUI="gamecommand;screen,ScreenOptionsUI;name,UI Options"
LineAdvanced="gamecommand;screen,ScreenOptionsAdvanced;name,Advanced Options"

ExplanationTogetherX=SCREEN_CENTER_X
ExplanationTogetherY=SCREEN_CENTER_Y+154
ExplanationTogetherOnCommand=stoptweening;zoom,0.5;shadowlength,0;wrapwidthpixels,400/0.7;cropright,1;linear,0.5;cropright,0
ExplanationTogetherOffCommand=stoptweening

[ScreenGameplaySyncMachine]
Class="ScreenGameplaySyncMachine"
Fallback="ScreenGameplay"
PrevScreen="ScreenOptionsService"
NextScreen="ScreenOptionsService"
PlayerType="PlayerSyncMachine"

#AllowCenter1Player=false
SyncInfoOnCommand=x,PositionPerPlayer(GAMESTATE:GetMasterPlayerNumber(),SCREEN_CENTER_X+160,SCREEN_CENTER_X-160);y,SCREEN_CENTER_Y;zoom,0;decelerate,0.5;zoom,0.6

# hidden by default:
LifeP1OnCommand=visible,false
LifeP2OnCommand=visible,false
ScoreP1OnCommand=visible,false
ScoreP2OnCommand=visible,false
StageOnCommand=visible,false
ScoreFrameOnCommand=visible,false
LifeFrameOnCommand=visible,false
DifficultyP1OnCommand=visible,false
DifficultyP1ReverseOnCommand=visible,false
DifficultyP2OnCommand=visible,false
DifficultyP2ReverseOnCommand=visible,false
SongOptionsOnCommand=visible,false

[PlayerSyncMachine]
Fallback="Player"
ComboOnCommand=visible,false

# SM5 helper screens

[ScreenReloadSongs]
Class="ScreenReloadSongs"
Fallback="Screen"
NextScreen="ScreenOptionsService"

[ScreenMapControllers]
Class="ScreenMapControllers"
Fallback="ScreenOptionsServiceChild"
NextScreen="ScreenOptionsService"
HelpText=Screen.String("HelpTextMapControllers")
#
# This locks the input when the screen starts.
LockInputSecs=2.5
# The warning cannot be dismissed until this time expires.
# This is additional time after LockInputSecs expires before the warning
# will be sent the TweenOff command.
AutoDismissWarningSecs=2.5
# This is the number of lines that are visible on screen.  Set this if you
# have a footer that covers up the bottom area of the screen.  The purpose
# is to have the settings visible on screen even when the player's cursor is
# on the exit choice.
LinesVisible=16
# This sets how long the NoSetListPrompt will show before being sent TweenOff.
AutoDismissNoSetListPromptSecs=5
# The time to auto dismiss the sanity warning if the current mapping is not sane.
AutoDismissSanitySecs=5
#
# The position of the Devices list and its On/Off commands.
DevicesX=SCREEN_CENTER_X
DevicesY=SCREEN_TOP+4
DevicesOnCommand=vertalign,top;maxheight,92;zoom,0.75;draworder,5;strokecolor,color("0,0,0,1")
DevicesOffCommand=
#
# The ListHeader parts are the row that the player's cursor starts on with
# the names of the columns.
ListHeaderP1S1Command=x,SCREEN_CENTER_X-270
ListHeaderP1S2Command=x,SCREEN_CENTER_X-195
ListHeaderP1S3Command=x,SCREEN_CENTER_X-120
ListHeaderP2S1Command=x,SCREEN_CENTER_X+120
ListHeaderP2S2Command=x,SCREEN_CENTER_X+195
ListHeaderP2S3Command=x,SCREEN_CENTER_X+270
# ListHeaderCenterOnCommand is for the center element of the ListHeader.
ListHeaderCenterOnCommand=x,SCREEN_CENTER_X;y,-6;zoom,0.7;shadowlength,1;ztest,true
# These commands are shared by all the ListHeader parts.
ListHeaderOnCommand=diffuse,color("#808080");shadowlength,0;max_dimension_use_zoom,true;zoom,0.75;maxwidth,130;
ListHeaderGainFocusCommand=diffuse,color("#808080");diffuseshift;effectcolor2,color("#808080");effectcolor1,color("#FFFFFF")
ListHeaderLoseFocusCommand=diffuse,color("#808080");stopeffect
#
# You want to leave the list of buttons to map so that all buttons for the
# current game type will be mappable.
ButtonsToMap=""
#
# The positions of the elements showing what is mapped.
MappedToP1S1Command=x,SCREEN_CENTER_X-270
MappedToP1S2Command=x,SCREEN_CENTER_X-195
MappedToP1S3Command=x,SCREEN_CENTER_X-120
MappedToP2S1Command=x,SCREEN_CENTER_X+120
MappedToP2S2Command=x,SCREEN_CENTER_X+195
MappedToP2S3Command=x,SCREEN_CENTER_X+270
# These commands are shared between all the elements.
MappedToOnCommand=diffuse,color("#808080");shadowlength,0;zoom,0.75;max_dimension_use_zoom,true;maxwidth,130
# WaitingCommand is executed when the player hits enter to set a key.
MappedToWaitingCommand=diffuse,color("#FF8080");pulse;effectperiod,0.5;effectmagnitude,0.8,1.3,0
# MappedInputCommand is executed after the player maps the key.
MappedToMappedInputCommand=diffuse,color("#808080");diffuseshift;effectcolor2,color("#808080");effectcolor1,color("#FFFFFF")
MappedToGainFocusCommand=diffuse,color("#808080");diffuseshift;effectcolor2,color("#808080");effectcolor1,color("#FFFFFF")
MappedToLoseFocusCommand=diffuse,color("#808080");stopeffect
# GainMarkCommand is executed when the player adds the element to the set list.
MappedToGainMarkCommand=textglowmode,'TextGlowMode_Inner';glow,color("#FF00007f")
# LoseMarkCommand is executed when the player removes the element from the set list.
MappedToLoseMarkCommand=textglowmode,'TextGlowMode_Inner';glow,color("#FF000000")
#
# The LineScroller is an ActorScroller that controls the positioning of the
# rows.
LineScrollerOnCommand=%function(self) self:draworder(-1); self:y(64) self:setsecondsperitem(0.1) self:SetTransformFromHeight(24) end
LineScrollerOffCommand=
LineHideCommand=visible,false
LineOnCommand=%function(self) self:y(0); self:visible(true); local LeftToRight = math.mod(self.ItemIndex, 2) == 0 and 1 or -1; self:addx(-SCREEN_WIDTH * LeftToRight); end
LineOffCommand=%function(self) local LeftToRight = math.mod(self.ItemIndex, 2) == 0 and 1 or -1; self:stoptweening() self:accelerate(0.3); self:addx(SCREEN_WIDTH * LeftToRight); self:queuecommand('Hide') end
#
# The "P1 slots" and "P2 slots" labels.  Use the entries in en.ini to change text.
LabelP1OnCommand=x,SCREEN_CENTER_X*0.4;zoom,0.7;shadowlength,1
LabelP1OffCommand=linear,0.5;diffusealpha,0
LabelP2OnCommand=x,SCREEN_CENTER_X*1.6;zoom,0.7;shadowlength,1
LabelP2OffCommand=linear,0.5;diffusealpha,0
# The primary effect of keys on this row.
PrimaryOnCommand=x,SCREEN_CENTER_X;y,-6;zoom,0.7;shadowlength,1;ztest,true
# The secondary effect of keys on this row.
SecondaryOnCommand=x,SCREEN_CENTER_X;y,6;zoom,0.5;shadowlength,1;ztest,true

[ScreenOptionsArcade]
Fallback="ScreenOptionsServiceChild"
NextScreen="ScreenOptionsService"
PrevScreen="ScreenOptionsService"
LineNames="1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18"
Line1="conf,GetRankingName"
Line2="conf,CoinMode"
Line3="conf,SongsPerPlay"
Line4="conf,AllowExtraStage"
Line5="conf,CoinsPerCredit"
Line6="conf,Premium"
Line7="conf,EventMode"
Line8="conf,MenuTimer"
Line9="conf,AllowMultipleHighScoreWithSameName"
Line10="conf,ComboContinuesBetweenSongs"
Line11="conf,AllowMultipleToasties"
Line12="conf,Disqualification"
Line13="conf,HarshHotLifePenalty"
Line14="conf,FailOffForFirstStageEasy"
Line15="conf,FailOffInBeginner"
Line16="conf,LockCourseDifficulties"
Line17="conf,MaxHighScoresPerListForMachine"
Line18="conf,MaxHighScoresPerListForPlayer"

[ScreenAppearanceOptions]
Fallback="ScreenOptionsServiceChild"
NextScreen="ScreenOptionsService"
PrevScreen="ScreenOptionsService"
LineNames="1,2,3,4,5,6,7,8,9,10,11,12"
Line1="conf,Game"
Line2="conf,Language"
Line3="conf,Announcer"
Line4="conf,Theme"
Line5="conf,DefaultNoteSkin"
Line6="lua,EditorNoteskin()"
Line7="conf,RandomBackgroundMode"
Line8="conf,BGBrightness"
Line9="conf,BackgroundFitMode"
Line10="conf,ShowDancingCharacters"
Line11="conf,ShowBeginnerHelper"
Line12="conf,NumBackgrounds"

[ScreenOptionsGraphicsSound]
Fallback="ScreenOptionsServiceChild"
NextScreen="ScreenOptionsService"
PrevScreen="ScreenOptionsService"
LineNames="VideoRenderer,1,2,3,RefreshRate,FSType,4,5,6,7,8,9,10,11,13,FNR,14,17,18,19"
LineVideoRenderer="lua,VideoRenderer()"
Line1="lua,ConfDisplayMode()"
Line2="lua,ConfAspectRatio()"
Line3="lua,ConfDisplayResolution()"
LineRefreshRate="lua,ConfRefreshRate()"
LineFSType="lua,ConfFullscreenType()"
Line4="conf,DisplayColorDepth"
Line5="conf,HighResolutionTextures"
Line6="conf,MaxTextureResolution"
Line7="conf,TextureColorDepth"
Line8="conf,MovieColorDepth"
Line9="conf,SmoothLines"
Line10="conf,CelShadeModels"
Line11="conf,DelayedTextureDelete"
Line12="conf,RefreshRate"
Line13="conf,Vsync"
LineFNR="conf,FastNoteRendering"
Line14="conf,ShowStats"
Line15="conf,ShowBanners"
Line16="conf,AttractSoundFrequency"
Line17="conf,SoundVolume"
Line18="conf,EnableAttackSounds"
Line19="conf,EnableMineHitSound"

[ScreenOptionsManageProfiles]
Class="ScreenOptionsManageProfiles"
Fallback="ScreenOptionsSimpleService"
PrevScreen="ScreenOptionsService"
NextScreen="ScreenOptionsService"
PrepareScreens="ScreenMiniMenuContext"
GroupedScreens="ScreenMiniMenuContext"
PersistScreens="ScreenMiniMenuContext"
ShowFooter=false
ShowHeader=false

TimerSeconds=-1

ShowExitRow=true
SeparateExitRow=true
SeparateExitRowY=SCREEN_CENTER_Y+110

ExplanationTogetherX=SCREEN_CENTER_X
ExplanationTogetherY=SCREEN_CENTER_Y+154
ExplanationTogetherOnCommand=stoptweening;zoom,0.5;shadowlength,0;wrapwidthpixels,400/0.665;cropright,1;linear,0.5;cropright,0
ExplanationTogetherOffCommand=stoptweening

[ScreenOptionsCustomizeProfile]
Class="ScreenWithMenuElements"
Fallback="ScreenWithMenuElements"
PrevScreen="ScreenOptionsManageProfiles"
NextScreen="ScreenOptionsManageProfiles"
PlayMusic=false
ShowHeader=false
ShowFooter=false
ShowCreditDisplay=false
TimerSeconds=-1
TimerOnCommand=visible,false

ShowExitRow=true
SeparateExitRow=true
SeparateExitRowY=SCREEN_CENTER_Y+140

ExplanationTogetherX=SCREEN_CENTER_X
ExplanationTogetherY=SCREEN_CENTER_Y+154
ExplanationTogetherOnCommand=stoptweening;zoom,0.5;shadowlength,0;wrapwidthpixels,400/0.665;cropright,1;linear,0.5;cropright,0
ExplanationTogetherOffCommand=stoptweening

[ScreenTextEntry]
Class="ScreenTextEntry"
Fallback="ScreenWithMenuElements"
ShowFooter=false
ShowHeader=false
PrevScreen=
HelpText=
TimerSeconds=-1
ShowStyleIcon=false
RowStartX=SCREEN_LEFT+100
RowStartY=SCREEN_CENTER_Y-30
RowEndX=SCREEN_RIGHT-100
RowEndY=SCREEN_BOTTOM-96
QuestionX=SCREEN_CENTER_X
QuestionY=SCREEN_CENTER_Y-40
QuestionOnCommand=diffuse,Color("Orange");diffusetopedge,BoostColor(Color("Orange"),1.5);wrapwidthpixels,600
#QuestionOnCommand=wrapwidthpixels,600
QuestionOffCommand=
AnswerX=SCREEN_CENTER_X
AnswerY=SCREEN_CENTER_Y+20
AnswerOnCommand=diffuse,Color("Blue");glowshift;
#AnswerOnCommand=zoom,1.5;shadowlength,0
AnswerOffCommand=
CursorOnCommand=
CursorOffCommand=
KeysInitCommand=zoom,0.8;shadowlength,0

[ScreenOptionsUI]
# user interface options that aren't related to themes, etc.
# (some don't get used/modified too often)
Fallback="ScreenOptionsServiceChild"
NextScreen="ScreenOptionsService"
PrevScreen="ScreenOptionsService"
LineNames="1,2,3,4,5,6,7,8"
Line1="conf,MusicWheelUsesSections"
Line2="conf,ShowBanners"
Line3="conf,ShowCaution"
Line4="conf,ShowDanger"
Line5="conf,ShowInstructions"
Line6="conf,ShowLyrics"
Line7="conf,ShowNativeLanguage"
Line8="conf,ShowSongOptions"

[ScreenOptionsAdvanced]
Fallback="ScreenOptionsServiceChild"
NextScreen="ScreenOptionsService"
PrevScreen="ScreenOptionsService"
LineNames="1,2,3,4,5,6,7,8,9,10,11,12"
Line1="conf,TimingWindowScale"
Line2="conf,LifeDifficulty"
Line3="conf,DefaultFailType"
Line4="conf,AllowW1"
Line5="conf,HiddenSongs"
Line6="conf,EasterEggs"
Line7="conf,UseUnlockSystem"
Line8="conf,AutogenSteps"
Line9="conf,AutogenGroupCourses"
Line10="conf,FastLoad"
Line11="conf,AllowSongDeletion"
Line12="conf,EditClearPromptThreshold"

[ScreenCustomOptions]
Fallback="ScreenOptionsServiceChild"
NextScreen="ScreenOptionsService"
PrevScreen="ScreenOptionsService"
LineNames="1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25"

Line1="lua,OptionRowModel()"
Line2="lua,OptionRowGoldenLeague()"
Line3="lua,OptionRowDanCourse()"
Line4="lua,OptionRowGameplayBackground()"
Line5="lua,OptionRowJudgementAnimation()"
Line6="lua,OptionRowStreamMode()"
Line7="lua,OptionRowNTOption()"
Line8="conf,Center1Player"
Line9="lua,OptionRowComboUnderField()"
Line10="lua,OptionRowScreenFilter()"
Line11="lua,OptionRowGuideLines()"
Line12="lua,OptionRowEXScore()"
Line13="lua,OptionRowFastSlow()"
Line14="lua,OptionRowShockArrows()"
Line15="lua,OptionRowBPM()"
Line16="lua,OptionRowSpeedDisplay()"
Line17="lua,SelectCharacter()"
Line18="lua,Mate1()"
Line19="lua,Mate2()"
Line20="lua,Mate3()"
Line21="lua,OptionRowCutIns()"
Line22="lua,CharacterSync()"
Line23="lua,BoomSync()"
Line24="lua,DiscoStars()"
Line25="lua,RMStage()"